<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">

<link rel="stylesheet" href="/blog/css/main.css">


<link rel="stylesheet" href="/blog/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"ningning0908.github.io","root":"/blog/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="光、温暖、温柔">
<meta property="og:type" content="website">
<meta property="og:title" content="学习笔记">
<meta property="og:url" content="https://ningning0908.github.io/blog/page/4/index.html">
<meta property="og:site_name" content="学习笔记">
<meta property="og:description" content="光、温暖、温柔">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Ning Ning">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://ningning0908.github.io/blog/page/4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>学习笔记</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">学习笔记</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ningning0908.github.io/blog/2020/08/03/%E5%89%8D%E7%AB%AF%E9%9D%A2%E7%BB%8F/%E5%A4%A7%E7%96%86%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AF%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Ning Ning">
      <meta itemprop="description" content="光、温暖、温柔">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2020/08/03/%E5%89%8D%E7%AB%AF%E9%9D%A2%E7%BB%8F/%E5%A4%A7%E7%96%86%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AF%95/" class="post-title-link" itemprop="url">大疆前端笔试汇总（笔试前准备版）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-03 20:52:44" itemprop="dateCreated datePublished" datetime="2020-08-03T20:52:44+08:00">2020-08-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-17 19:19:29" itemprop="dateModified" datetime="2020-08-17T19:19:29+08:00">2020-08-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E5%89%8D%E7%AB%AF%E9%9D%A2%E7%BB%8F/" itemprop="url" rel="index"><span itemprop="name">前端面经</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="JavaScript之防篡改对象（高级技巧）"><a href="#JavaScript之防篡改对象（高级技巧）" class="headerlink" title="JavaScript之防篡改对象（高级技巧）"></a>JavaScript之防篡改对象（高级技巧）</h2><p>在实际开发中，有时会无意地修改了别人的代码，或者用不兼容的功能重写原生对象，这样会给整个开发带来困扰。使用防篡改方式可以防止别人篡改对象代码。</p>
<p><strong>注：一旦对象定义为防篡改，就无法撤销了。也就是说无法改回来了。</strong></p>
<h3 id="不可扩展对象"><a href="#不可扩展对象" class="headerlink" title="不可扩展对象"></a>不可扩展对象</h3><p>在默认情况下，所有对象都是可以扩展的，也就是说，无论什么时候都可以向对象中添加属性和方法。例如以下，先定义一个对象，再向其添加一个新属性：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">"Tom"</span></span><br><span class="line">&#125;</span><br><span class="line">obj.age = <span class="number">21</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj.age)  <span class="comment">// 21</span></span><br></pre></td></tr></table></figure>

<p><strong>即使先定义好一个对象，后面也可以向其新添加属性和方法。</strong></p>
<h4 id="Object-preventExtensions-方法"><a href="#Object-preventExtensions-方法" class="headerlink" title="Object.preventExtensions()方法"></a>Object.preventExtensions()方法</h4><p>现在使用<code>Object.preventExtensions()</code>方法可以改变这个行为，这样就不能向对象中新添加属性和方法了。<strong>不可扩展量一级保护措施。</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">"Tom"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.preventExtensions(obj);</span><br><span class="line">obj.age = <span class="number">21</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj.age);  <span class="comment">//undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//修改原有的属性</span></span><br><span class="line">obj.name = <span class="string">"Bob"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj.name); <span class="comment">//Bob</span></span><br></pre></td></tr></table></figure>
<p><strong>可以发现，使用了Object.preventExtensions()方法，就不能向对象中新添加属性和方法了，但是可以修改对象原有的属性和方法。</strong></p>
<h4 id="Object-isExtensible-方法"><a href="#Object-isExtensible-方法" class="headerlink" title="Object.isExtensible()方法"></a>Object.isExtensible()方法</h4><p>使用这个方法可以确定对象是否为可篡改，如果可篡改，则返回<code>true</code>，相反返回<code>false</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">"Tom"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.isExtensible(obj));  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">Object</span>.preventExtensions(obj);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.isExtensible(obj));  <span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<h3 id="密封的对象"><a href="#密封的对象" class="headerlink" title="密封的对象"></a>密封的对象</h3><p>对象的第二个保护级别就是密封对象，密封对象不可扩展，且其对象的属性特性<code>[[Configurable]]</code>被设置为<code>false</code>，意味着对象的属性和方法不能通过<code>delete</code>操作符删除。<br>该方法用于密封对象。</p>
<h4 id="Object-seal-方法"><a href="#Object-seal-方法" class="headerlink" title="Object.seal()方法"></a>Object.seal()方法</h4><p>该方法用于密封对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    name: <span class="string">"Tom"</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//密封对象</span></span><br><span class="line"><span class="built_in">Object</span>.seal(obj);</span><br><span class="line"> </span><br><span class="line">obj.age = <span class="number">21</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj.age); <span class="comment">//undefined 不能新添加属性</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">delete</span> obj.name;</span><br><span class="line"><span class="built_in">console</span>.log(obj.name); <span class="comment">//Tom 不能删除对象的属性</span></span><br></pre></td></tr></table></figure>
<p>密封的对象不能新添加属性、不能删除属性。拥有了不可扩展对象的特性。</p>
<h4 id="Object-isSealed-方法"><a href="#Object-isSealed-方法" class="headerlink" title="Object.isSealed()方法"></a>Object.isSealed()方法</h4><p>该方法用于确定对象是否是密封对象，如果是密封对象返回true，相反返回false。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    name: <span class="string">"Tom"</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.isExtensible(obj)); <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(Ojbect.isSealed(obj)); <span class="comment">//false</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">Object</span>.seal(obj);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.isExtensible(obj)); <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(Ojbect.isSealed(obj)); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<h3 id="冻结对象"><a href="#冻结对象" class="headerlink" title="冻结对象"></a>冻结对象</h3><p>保护对象的最高级防篡改就是冻结对象。冻结的对象，即是不可扩展的，也是密封的，而且其属性的特性<code>[[Writable]]</code>被设置为<code>false</code>，也就是说<strong>属性值也不能修改</strong>。</p>
<h4 id="Object-freeze-方法"><a href="#Object-freeze-方法" class="headerlink" title="Object.freeze()方法"></a>Object.freeze()方法</h4><p>该方法用于设置对象为冻结对象。冻结对象同时拥有了不可扩展对象、密封对象的特性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">"Tom"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.freeze(obj); <span class="comment">//冻结对象</span></span><br><span class="line">obj.age = <span class="number">21</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj.age);  <span class="comment">//undefined 不可扩展</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> obj.name;</span><br><span class="line"><span class="built_in">console</span>.log(obj.name);  <span class="comment">//Tom 不可删除</span></span><br><span class="line">obj.name = <span class="string">"Bob"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj.name)   <span class="comment">//Tom 不可修改</span></span><br></pre></td></tr></table></figure>

<h4 id="Object-isFrozen-方法"><a href="#Object-isFrozen-方法" class="headerlink" title="Object.isFrozen()方法"></a>Object.isFrozen()方法</h4><p>该方法用于确定对象是否是冻结对象。如果是返回true，相反返回false。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    name: <span class="string">"Tom"</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//未冻结之前</span></span><br><span class="line"><span class="built_in">console</span>.log(Oject.isExtensible(obj)); <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(Oject.isSealed(obj)); <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(Oject.isFrozen(obj)); <span class="comment">//false</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//冻结对象之后</span></span><br><span class="line"><span class="built_in">Object</span>.freeze(obj); <span class="comment">//冻结对象</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(Oject.isExtensible(obj)); <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(Oject.isSealed(obj)); <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(Oject.isFrozen(obj)); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<p><strong>总结： 不可扩展对象、密封对象均可修改属性。不可扩展对象、密封对象、冻结对象均不可扩展。密封对象、冻结对象均不可删除属性。</strong></p>
<h2 id="CSS选择符有哪些？哪些属性可以继承？优先级算法如何计算？"><a href="#CSS选择符有哪些？哪些属性可以继承？优先级算法如何计算？" class="headerlink" title="CSS选择符有哪些？哪些属性可以继承？优先级算法如何计算？"></a>CSS选择符有哪些？哪些属性可以继承？优先级算法如何计算？</h2><h3 id="CSS-选择符有哪些？"><a href="#CSS-选择符有哪些？" class="headerlink" title="CSS 选择符有哪些？"></a>CSS 选择符有哪些？</h3><div class="note info">
            <p>1.id选择器（#id）<br>2.类选择器（.class）<br>3.标签选择器（div，h1，p）<br>4.相邻选择器（h1 + p）<br>5.子选择器（ul &gt; li）<br>6.后代选择器（li a）<br>7.通配符选择器（ * ）<br>8.属性选择器（a[title]）<br>9.伪类选择器（a:hover，li:nth-child）</p>
          </div>

<h3 id="可继承的样式"><a href="#可继承的样式" class="headerlink" title="可继承的样式"></a>可继承的样式</h3><div class="note info">
            <p>1.字体系列属性 font，font-family，font-weight，font-size，font-style，font-variant，font-stretch，font-size-adjust<br>2.文本系列属性 text-indent，text-align，line-height，word-spacing，letter-spacing，text-transform，direction，color<br>3.元素可见性 visibility<br>4.表格布局属性 caption-side，border-collapse，border-spacing，empty-cells，table-layout<br>5.列表布局属性 list-style-type，list-style-image，list-style-position，list-style<br>6.生成内容属性 quotes<br>7.光标属性 cursor<br>8.页面样式属性 page，page-break-inside，windows，orphans<br>9.声音样式属性 speak，speak-punctuation，speak-numeral，speak-header，speech-rate，volume，voice-family，pitch，pitch-range，stress，richness，azimuth，elevation</p>
          </div>

<h3 id="优先级算法如何计算？"><a href="#优先级算法如何计算？" class="headerlink" title="优先级算法如何计算？"></a>优先级算法如何计算？</h3><div class="note info">
            <p>1.优先级就近原则，同权重情况下样式定义最近者为准；<br>2.载入样式以最后载入的定位为准；<br>3.!important &gt; id &gt; class &gt; tag；<br>4.important 比 内联优先级高，但内联比id要高。</p>
          </div>

<h2 id="前端三种存储方式"><a href="#前端三种存储方式" class="headerlink" title="前端三种存储方式"></a>前端三种存储方式</h2><p>参考： <a href="https://blog.csdn.net/qq_40779721/article/details/79196893" target="_blank" rel="noopener">https://blog.csdn.net/qq_40779721/article/details/79196893</a><br>js-cookie使用： <a href="https://www.cnblogs.com/zzz-knight/p/11692362.html" target="_blank" rel="noopener">https://www.cnblogs.com/zzz-knight/p/11692362.html</a></p>
<h2 id="什么是面向对象？面向对象的特征是什么？"><a href="#什么是面向对象？面向对象的特征是什么？" class="headerlink" title="什么是面向对象？面向对象的特征是什么？"></a>什么是面向对象？面向对象的特征是什么？</h2><p>参考：<a href="https://www.cnblogs.com/zhengyufeng/p/10992972.html" target="_blank" rel="noopener">https://www.cnblogs.com/zhengyufeng/p/10992972.html</a><br>和另一篇博客：<br><a href="http://localhost:4000/blog/2020/04/17/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/" target="_blank" rel="noopener">http://localhost:4000/blog/2020/04/17/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/</a></p>
<h2 id="千位分隔符（js实现）"><a href="#千位分隔符（js实现）" class="headerlink" title="千位分隔符（js实现）"></a>千位分隔符（js实现）</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">//方法一</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 千位分隔符(js 实现)</span></span></span><br><span class="line"><span class="actionscript"><span class="function"><span class="keyword">function</span> <span class="title">thousandBitSeparator</span><span class="params">(str)</span></span>&#123; </span></span><br><span class="line"><span class="javascript">    str = <span class="built_in">String</span>(str);</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">if</span> (str.indexOf(<span class="string">'.'</span>)&gt;=<span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> postfix = str.substring(str.indexOf(<span class="string">'.'</span>));</span></span><br><span class="line"><span class="actionscript">        str = str.substring(<span class="number">0</span>,str.indexOf(<span class="string">'.'</span>));</span></span><br><span class="line"><span class="actionscript">    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> postfix = <span class="string">''</span>;</span></span><br><span class="line">    &#125;;</span><br><span class="line"><span class="actionscript">    <span class="comment">// console.log(postfix);</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// .99</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// console.log(str);</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 9999999999999</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> iNum = str.length % <span class="number">3</span>; </span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> prev = <span class="string">''</span>; </span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> iNow = <span class="number">0</span>; </span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> temp = <span class="string">''</span>; </span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> arr = []; </span></span><br><span class="line">    if (iNum != 0)&#123; </span><br><span class="line">        prev = str.substring(0, iNum); </span><br><span class="line">        arr.push(prev); </span><br><span class="line">    &#125; </span><br><span class="line">    str = str.substring(iNum); </span><br><span class="line"><span class="actionscript">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; str.length; i++)&#123; </span></span><br><span class="line">        iNow++; </span><br><span class="line">        temp += str[i]; </span><br><span class="line">        if (iNow == 3 &amp;&amp; temp)&#123; </span><br><span class="line">          arr.push(temp); </span><br><span class="line"><span class="actionscript">          temp = <span class="string">''</span>; </span></span><br><span class="line">          iNow = 0; </span><br><span class="line">        &#125; </span><br><span class="line">    &#125; </span><br><span class="line"><span class="actionscript">    <span class="comment">// console.log(arr);</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// ["9", "999", "999", "999", "999"]</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> arr.join(<span class="string">','</span>) + postfix; </span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(thousandBitSeparator(<span class="string">'9999999999999.99222'</span>));</span></span><br><span class="line"><span class="actionscript"><span class="comment">// 9,999,999,999,999.99</span></span></span><br><span class="line"></span><br><span class="line"><span class="actionscript"><span class="comment">//方法二，正则表达式</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// 正则</span></span></span><br><span class="line"><span class="actionscript"><span class="function"><span class="keyword">function</span> <span class="title">thousandBitSeparator</span><span class="params">(num)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> num</span></span><br><span class="line">        .toString()</span><br><span class="line"><span class="javascript">        .replace(<span class="regexp">/(\d)(?=(\d&#123;3&#125;)+\.)/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$<span class="number">0</span>, $<span class="number">1</span></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> $<span class="number">1</span> + <span class="string">","</span>;</span></span><br><span class="line">        &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(thousandBitSeparator(<span class="number">-1234567.9012</span>));</span></span><br><span class="line"><span class="actionscript"><span class="comment">// -1,234,567.9012</span></span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h2><p>参考：<a href="https://www.cnblogs.com/onepixel/articles/7674659.html" target="_blank" rel="noopener">https://www.cnblogs.com/onepixel/articles/7674659.html</a><br>我写过的快排代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">方法一：</span><br><span class="line"><span class="keyword">let</span> list = [<span class="number">84</span>, <span class="number">83</span>, <span class="number">88</span>, <span class="number">87</span>, <span class="number">61</span>, <span class="number">50</span>, <span class="number">70</span>, <span class="number">60</span>, <span class="number">80</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quickSort</span>(<span class="params">array,left,right</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//待排序的区域至少有两个元素</span></span><br><span class="line">    <span class="keyword">let</span> len = array.length</span><br><span class="line">    left = <span class="keyword">typeof</span> left != <span class="string">'number'</span>? <span class="number">0</span> : left;</span><br><span class="line">    right = <span class="keyword">typeof</span> right != <span class="string">'number'</span>? len - <span class="number">1</span> : right;</span><br><span class="line">    <span class="keyword">if</span> (left &lt; right) &#123;</span><br><span class="line">        mid = partition(array,left,right)</span><br><span class="line">        quickSort(array,left,mid<span class="number">-1</span>)</span><br><span class="line">        quickSort(array,mid+<span class="number">1</span>,right)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> array</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//分区操作</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">partition</span>(<span class="params">arr, left ,right</span>) </span>&#123;     <span class="comment">// 分区操作</span></span><br><span class="line">    <span class="keyword">let</span> pivot = left,                      <span class="comment">// 设定基准值（pivot）</span></span><br><span class="line">        index = pivot + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = index; i &lt;= right; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(arr[i] &lt; arr[pivot]) &#123;</span><br><span class="line">            swap(arr, i, index);</span><br><span class="line">            index++;</span><br><span class="line">        &#125;       </span><br><span class="line">    &#125;</span><br><span class="line">    swap(arr, pivot, index - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> index<span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params">arr, i, j</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> temp = arr[i];</span><br><span class="line">    arr[i] = arr[j];</span><br><span class="line">    arr[j] = temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> result = quickSort(list)</span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br><span class="line">--------------------------------------------------------------------</span><br><span class="line">方法二：</span><br><span class="line"><span class="keyword">let</span> list = [<span class="number">84</span>, <span class="number">83</span>, <span class="number">88</span>, <span class="number">87</span>, <span class="number">61</span>, <span class="number">50</span>, <span class="number">70</span>, <span class="number">60</span>, <span class="number">80</span>]</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quickSort</span>(<span class="params">array,left,right</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> len = array.length</span><br><span class="line">    left = <span class="keyword">typeof</span> left != <span class="string">'number'</span>? <span class="number">0</span> : left;</span><br><span class="line">    right = <span class="keyword">typeof</span> right != <span class="string">'number'</span>? len - <span class="number">1</span> : right;</span><br><span class="line">    <span class="keyword">if</span> (left &lt; right) &#123;</span><br><span class="line">        mid = partition(array,left,right)</span><br><span class="line">        quickSort(array,left,mid<span class="number">-1</span>)</span><br><span class="line">        quickSort(array,mid+<span class="number">1</span>,right)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> array</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//分区函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">partition</span>(<span class="params">array,left,right</span>) </span>&#123;</span><br><span class="line">    temp = array[left]</span><br><span class="line">    <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">        <span class="keyword">while</span> (left &lt; right &amp;&amp; array[right] &gt;= temp) &#123;</span><br><span class="line">            right -= <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">        array[left] = array[right]</span><br><span class="line">         <span class="keyword">while</span> (left &lt; right &amp;&amp; array[left] &lt;= temp) &#123;</span><br><span class="line">            left += <span class="number">1</span></span><br><span class="line">         &#125;</span><br><span class="line">        array[right] = array[left]</span><br><span class="line">    &#125;</span><br><span class="line">    array[left] = temp</span><br><span class="line">    <span class="keyword">return</span> left</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(quickSort(list))</span><br></pre></td></tr></table></figure>
<h2 id="数组和链表的区别"><a href="#数组和链表的区别" class="headerlink" title="数组和链表的区别"></a>数组和链表的区别</h2><p><img src="https://ningning-1259809020.cos.ap-chengdu.myqcloud.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95javascript%E6%8F%8F%E8%BF%B0/%E6%95%B0%E7%BB%84%E5%92%8C%E9%93%BE%E8%A1%A8%E5%8C%BA%E5%88%AB%E5%AF%B9%E6%AF%94%E8%A1%A8.png" alt="数组和链表区别对比表"></p>
<h2 id="强制缓存和协商缓存的区别"><a href="#强制缓存和协商缓存的区别" class="headerlink" title="强制缓存和协商缓存的区别"></a>强制缓存和协商缓存的区别</h2><p>很棒的总结： <a href="https://segmentfault.com/a/1190000016199807" target="_blank" rel="noopener">https://segmentfault.com/a/1190000016199807</a></p>
<h2 id="进程间的通信方式"><a href="#进程间的通信方式" class="headerlink" title="进程间的通信方式"></a>进程间的通信方式</h2><p>参考博客： <a href="https://www.cnblogs.com/zgq0/p/8780893.html" target="_blank" rel="noopener">https://www.cnblogs.com/zgq0/p/8780893.html</a></p>
<h2 id="事件委托"><a href="#事件委托" class="headerlink" title="事件委托"></a>事件委托</h2><p>（这题给出了一个ul标签和三个li标签，每个li标签各有一个id名，js部分通过for循环给每个li标签添加了一个click事件。问以下代码还有什么可以优化的地方？）<br>原题代码：</p>
<p>HTML部分：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">'menu'</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">'list1'</span>&gt;</span>list1 was clicked<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">'list2'</span>&gt;</span>list2 was clicked<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">'list3'</span>&gt;</span>list3 was clicked<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>JS部分：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> list = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'li'</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; list.length; i++) &#123;</span><br><span class="line">	list[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="keyword">this</span>.innerHTML)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>懂得人一眼就看出这题考察的是什么知识点。我们知道每添加一个事件，就会耗费一部分内存，所以事件越少性能越高。<br><strong>事件委托就是利用事件冒泡的原理，委托子元素的父元素去代理执行事件，所以，上述方式是添加了三个事件，而通过事件委托可只需要添加一个点击事件即可实现相同的功能。</strong><br>修改之后的JS代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> menu = <span class="built_in">document</span>.getElementById(<span class="string">'menu'</span>);</span><br><span class="line">menu.addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// console.log(e.target.id + ' was clicked')</span></span><br><span class="line">  <span class="built_in">console</span>.log(e.target.innerHTML)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ningning0908.github.io/blog/2020/08/03/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%AD%97%E5%85%B8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Ning Ning">
      <meta itemprop="description" content="光、温暖、温柔">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2020/08/03/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%AD%97%E5%85%B8/" class="post-title-link" itemprop="url">字典</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-03 14:34:35" itemprop="dateCreated datePublished" datetime="2020-08-03T14:34:35+08:00">2020-08-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-04 20:00:16" itemprop="dateModified" datetime="2020-08-04T20:00:16+08:00">2020-08-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95JavaScript%E6%8F%8F%E8%BF%B0/" itemprop="url" rel="index"><span itemprop="name">数据结构与算法JavaScript描述</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>字典是一个以键-值对形式存储数据的数据结构，就像电话号码簿里的名字和电话号码一样，要找一个电话时，先找名字，名字找到了，紧接着它的电话号码就找到了。这里的键是你用来查找的东西，值是你的查找得到的结果。</p>
<h2 id="Dictionary类"><a href="#Dictionary类" class="headerlink" title="Dictionary类"></a>Dictionary类</h2><p>Dictionay 类的基础是 <code>Array</code> 类， 而不是<code>Object</code> 类。以下面的代码开始定义 <code>Dictionary</code> 类：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dictionary</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.datastore = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>定义add()方法，该方法接受两个参数：键和值。键是值在字典中的索引。代码如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">key,value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.datastore[key] = value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>定义find()方法，该方法接受以键作为参数，返回和其关联的值。代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">find</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.datastore[key];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>定义showAll()方法，显示字典中的所有的键-值对，代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showALL</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//必须为for of, for in 得到的是数字0，1,... (亲测)</span></span><br><span class="line">  <span class="comment">//for in是ES5标准，遍历key. for of是ES6标准，遍历value.</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">of</span> <span class="built_in">Object</span>.keys(<span class="keyword">this</span>.datastore)) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(key + <span class="string">"-&gt;"</span> + <span class="keyword">this</span>.datastore[key])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Dictionary类调用代码示例如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dictionary</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.add = add;</span><br><span class="line">    <span class="keyword">this</span>.datastore = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">    <span class="keyword">this</span>.find = find;</span><br><span class="line">    <span class="keyword">this</span>.remove = remove;</span><br><span class="line">    <span class="keyword">this</span>.showAll = showAll;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.datastore[key] = value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">find</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.datastore[key];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">remove</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">delete</span> <span class="keyword">this</span>.datastore[key];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">showAll</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">//必须为for of, for in 得到的是数字0，1,...</span></span><br><span class="line">      <span class="comment">//for in是ES5标准，遍历key. for of是ES6标准，遍历value.</span></span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">of</span> <span class="built_in">Object</span>.keys(<span class="keyword">this</span>.datastore)) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(key)</span><br><span class="line">        <span class="built_in">console</span>.log(key + <span class="string">" -&gt; "</span> + <span class="keyword">this</span>.datastore[key]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> pbook = <span class="keyword">new</span> Dictionary();</span><br><span class="line">  pbook.add(<span class="string">"Mike"</span>,<span class="string">"123"</span>);</span><br><span class="line">  pbook.add(<span class="string">"David"</span>, <span class="string">"345"</span>);</span><br><span class="line">  pbook.add(<span class="string">"Cynthia"</span>, <span class="string">"456"</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"David's extension: "</span> + pbook.find(<span class="string">"David"</span>));</span><br><span class="line">  pbook.remove(<span class="string">"David"</span>);</span><br><span class="line">  pbook.showAll();</span><br></pre></td></tr></table></figure>
<p>输出结果如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">David<span class="string">'s extension: 345</span></span><br><span class="line"><span class="string">Mike -&gt; 123</span></span><br><span class="line"><span class="string">Cynthia -&gt; 456</span></span><br></pre></td></tr></table></figure>
<h2 id="Dictionary类的辅助方法"><a href="#Dictionary类的辅助方法" class="headerlink" title="Dictionary类的辅助方法"></a>Dictionary类的辅助方法</h2><p>定义count()方法，计算字典中的元素个数。**不能使用length方法，因为当键的类型为字符串时，length属性就不管用了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">count</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> n = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">of</span> <span class="built_in">Object</span>.keys(<span class="keyword">this</span>.datastore)) &#123;</span><br><span class="line">    ++n;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>定义全部删除方法，clear()方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clear</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">of</span> <span class="built_in">Object</span>.keys(<span class="keyword">this</span>.datastore)) &#123;</span><br><span class="line">    <span class="keyword">delete</span> <span class="keyword">this</span>.datastore[key];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="为Dictionary类添加排序功能"><a href="#为Dictionary类添加排序功能" class="headerlink" title="为Dictionary类添加排序功能"></a>为Dictionary类添加排序功能</h2><p>字典的主要用途是通过键取值， 我们无须太关心数据在字典中的实际存储顺序。 然而， 很多人都希望看到一个有序的字典。 下面来看看怎样让前面实现的字典按顺序显示。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showAll</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">of</span> <span class="built_in">Object</span>.keys(<span class="keyword">this</span>.datastore).sort()) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(key + <span class="string">"-&gt;"</span> + <span class="keyword">this</span>.datastore[key]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>该定义和之前的定义唯一的区别是： 从数组 datastore 拿到键后， 调用 sort() 方法对键重新排了序。</strong></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ningning0908.github.io/blog/2020/08/03/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%93%BE%E8%A1%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Ning Ning">
      <meta itemprop="description" content="光、温暖、温柔">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2020/08/03/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%93%BE%E8%A1%A8/" class="post-title-link" itemprop="url">链表</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-08-03 08:22:00 / 修改时间：14:31:13" itemprop="dateCreated datePublished" datetime="2020-08-03T08:22:00+08:00">2020-08-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95JavaScript%E6%8F%8F%E8%BF%B0/" itemprop="url" rel="index"><span itemprop="name">数据结构与算法JavaScript描述</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="链表"><a href="#链表" class="headerlink" title="链表"></a>链表</h2><p>如下图所示为有头节点的链表<br><img src="https://ningning-1259809020.cos.ap-chengdu.myqcloud.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95javascript%E6%8F%8F%E8%BF%B0/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86" alt="链表示意图"></p>
<h3 id="数组的缺点"><a href="#数组的缺点" class="headerlink" title="数组的缺点"></a>数组的缺点</h3><p>JavaScript中的数组的主要问题是：它们被实现成了对象，与其他语言的数组相比，效率很低。若在实际使用中，发现数组效率很慢，可以考虑用链表代替，如果需要随机访问，数组还是最好的选择。</p>
<h2 id="基于对象的链表"><a href="#基于对象的链表" class="headerlink" title="基于对象的链表"></a>基于对象的链表</h2><p>链表是由一组节点组成的集合。每个节点都使用一个对象的引用指向它的后继。指向另一个节点的引用叫做链。<br>我们设计的链表包含两个类。Node类用来表示节点，LinkedList类提供了插入节点、删除节点、显示列表元素的方法，以及其他一些辅助方法。</p>
<h3 id="Node类"><a href="#Node类" class="headerlink" title="Node类"></a>Node类</h3><p>Node类型包含两个属性：element用来保存节点上的数据，next用来保存指向下一个节点的链接。我们使用一个构造函数来创建节点，该构造函数设置了这两个属性的值：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Node</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.element = element;</span><br><span class="line">  <span class="keyword">this</span>.next = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="LinkedList类"><a href="#LinkedList类" class="headerlink" title="LinkedList类"></a>LinkedList类</h3><p>LList类提供了对链表进行操作的方法。该类的功能包括插入删除节点、在列表中查找给定的值。该类也有一个构造函数，链表只有一个属性，那就是使用一个Node对象来保存该链表的头节点。该类的构造函数如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">LList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.head = <span class="keyword">new</span> Node(<span class="string">"head"</span>);</span><br><span class="line">  <span class="keyword">this</span>.find = find;</span><br><span class="line">  <span class="keyword">this</span>.insert = insert;</span><br><span class="line">  <span class="keyword">this</span>.remove = remove;</span><br><span class="line">  <span class="keyword">this</span>.display = display;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div class="note info">
            <ul><li>insert方法：插入新节点, 向链表中插入一个新节点时需要明确指出要在哪个节点前面或者后面插入；</li><li>find方法：遍历链表，查找给定数据；</li><li>display方法：显示链表中的元素；</li><li>remove方法：删除链表中的元素。</li></ul>
          </div>

<p>代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Node</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.element = element;</span><br><span class="line">      <span class="keyword">this</span>.next = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">LList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.head = <span class="keyword">new</span> Node(<span class="string">"head"</span>);</span><br><span class="line">      <span class="keyword">this</span>.find = find;</span><br><span class="line">      <span class="keyword">this</span>.insert = insert;</span><br><span class="line">      <span class="keyword">this</span>.remove = remove;</span><br><span class="line">      <span class="keyword">this</span>.display = display;</span><br><span class="line">      <span class="keyword">this</span>.findPrevious = findPrevious;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">find</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> currNode = <span class="keyword">this</span>.head;</span><br><span class="line">      <span class="keyword">while</span>(currNode.element != item) &#123;</span><br><span class="line">        currNode = currNode.next;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> currNode;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">insert</span>(<span class="params">newElement,item</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> newNode = <span class="keyword">new</span> Node(newElement);</span><br><span class="line">      <span class="keyword">let</span> current = <span class="keyword">this</span>.find(item);</span><br><span class="line">      newNode.next = current.next;</span><br><span class="line">      current.next = newNode;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">display</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> currNode = <span class="keyword">this</span>.head;</span><br><span class="line">      <span class="keyword">while</span>(!(currNode.next == <span class="literal">null</span>)) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(currNode.next.element);</span><br><span class="line">        currNode = currNode.next;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">findPrevious</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> currNode = <span class="keyword">this</span>.head;</span><br><span class="line">      <span class="keyword">while</span>(!(currNode.next == <span class="literal">null</span>) &amp;&amp; currNode.next.element != item) &#123;</span><br><span class="line">        currNode = currNode.next</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> currNode</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">remove</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> prevNode = <span class="keyword">this</span>.findPrevious(item);</span><br><span class="line">      <span class="keyword">if</span>(!(prevNode.next == <span class="literal">null</span>)) &#123;</span><br><span class="line">        prevNode.next = prevNode.next.next;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> cities = <span class="keyword">new</span> LList();</span><br><span class="line">    cities.insert(<span class="string">"Conway"</span>,<span class="string">"head"</span>);</span><br><span class="line">    cities.insert(<span class="string">"Russellville"</span>,<span class="string">"Conway"</span>);</span><br><span class="line">    cities.insert(<span class="string">"Alma"</span>,<span class="string">"Russellville"</span>);</span><br><span class="line">    cities.display();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"***********"</span>)</span><br><span class="line">    cities.remove(<span class="string">"Russellville"</span>);</span><br><span class="line">    cities.display();</span><br></pre></td></tr></table></figure>

<p>输出为：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Conway</span><br><span class="line">Russellville</span><br><span class="line">Alma</span><br><span class="line">***********</span><br><span class="line">Conway</span><br><span class="line">Alma</span><br></pre></td></tr></table></figure>
<h2 id="双向链表"><a href="#双向链表" class="headerlink" title="双向链表"></a>双向链表</h2><p>尽管从链表的头节点遍历到尾节点很简单，但反过来，从后向前遍历则没那么简单，通过给Node对象增加一个属性，该属性存储指向前驱节点的链接，这样就容易多了。此时向链表中插入一个节点需要更多的工作，我们需要指出该节点正确的前驱和后继。但是在从链表中删除节点时，效率提高了，不需要再查找待删除节点的前驱节点了。下图演示了双向链表的工作原理。<br><img src="https://ningning-1259809020.cos.ap-chengdu.myqcloud.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95javascript%E6%8F%8F%E8%BF%B0/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86" alt="双向链表工作原理"></p>
<p>与单向链表不同的是，Node类增加一个previous属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Node</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.element = element;</span><br><span class="line">  <span class="keyword">this</span>.next = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">this</span>.previous = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div class="note info">
            <p>双向链表相对于单向链表来说，方法上有哪些不同：</p><ul><li>insert(): 与单向链表类似，但是需要设置新节点的previous属性，使其指向该节点的前驱。</li><li>remove(): 与单向链表相比效率更高，因为不需要查找前驱节点了。</li><li>findLast(): 增加的方法，用来查找最后的节点，同时免除了从后往前遍历之苦。</li><li>dispReverse()方法：反序显示双向链表中的元素。</li></ul>
          </div>
<p>代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">Node</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.element = element;</span><br><span class="line">  <span class="keyword">this</span>.next = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">this</span>.previous = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">LList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.head = <span class="keyword">new</span> Node(<span class="string">"head"</span>);</span><br><span class="line">  <span class="keyword">this</span>.find = find;</span><br><span class="line">  <span class="keyword">this</span>.insert = insert;</span><br><span class="line">  <span class="keyword">this</span>.display =display;</span><br><span class="line">  <span class="keyword">this</span>.remove = remove;</span><br><span class="line">  <span class="keyword">this</span>.findLast = findLast;</span><br><span class="line">  <span class="keyword">this</span>.dispReverse = dispReverse;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">find</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> currNode = <span class="keyword">this</span>.head;</span><br><span class="line">  <span class="keyword">while</span>(currNode.element != item) &#123;</span><br><span class="line">    currNode =currNode.next</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> currNode</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">insert</span>(<span class="params">newElement, item</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> newNode = <span class="keyword">new</span> Node(newElement);</span><br><span class="line">  <span class="keyword">let</span> current = <span class="keyword">this</span>.find(item);</span><br><span class="line">  <span class="keyword">while</span>(current.element != item) &#123;</span><br><span class="line">    current = current.next;</span><br><span class="line">  &#125;</span><br><span class="line">  newNode.next = current.next;</span><br><span class="line">  newNode.previous = current;</span><br><span class="line">  current.next = newNode;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">display</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> currNode = <span class="keyword">this</span>.head;</span><br><span class="line">  <span class="keyword">while</span>(!(currNode.next == <span class="literal">null</span>)) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(currNode.element);</span><br><span class="line">    currNode = currNode.next;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">remove</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> currNode = <span class="keyword">this</span>.find(item);</span><br><span class="line">  <span class="keyword">if</span>(!(currNode.next == <span class="literal">null</span>)) &#123;</span><br><span class="line">    currNode.previous.next = currNode.next;</span><br><span class="line">    currNode.next.previous = currNode.previous;</span><br><span class="line">    currNode.next = <span class="literal">null</span>;</span><br><span class="line">    currNode.previous = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findLast</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> currNode = <span class="keyword">this</span>.head;</span><br><span class="line">  <span class="keyword">while</span>(!(currNode.next == <span class="literal">null</span>)) &#123;</span><br><span class="line">    currNode = currNode.next</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> currNode</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dispReverse</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> currNode = <span class="keyword">this</span>.head;</span><br><span class="line">  currNode = <span class="keyword">this</span>.findLast();</span><br><span class="line">  <span class="keyword">while</span>(!(currNode.previous == <span class="literal">null</span>)) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(currNode.element);</span><br><span class="line">    currNode = currNode.previous;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> cities = <span class="keyword">new</span> LList();</span><br><span class="line">cities.insert(<span class="string">"Conway"</span>,<span class="string">"head"</span>);</span><br><span class="line">cities.insert(<span class="string">"Russellville"</span>,<span class="string">"Conway"</span>);</span><br><span class="line">cities.insert(<span class="string">"Alma"</span>,<span class="string">"Russellville"</span>);</span><br><span class="line">cities.display();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"***********"</span>)</span><br><span class="line">cities.remove(<span class="string">"Russellville"</span>);</span><br><span class="line">cities.display();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;"</span>)</span><br><span class="line">cities.dispReverse()</span><br></pre></td></tr></table></figure>
<p>输出结果</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">head</span><br><span class="line">Conway</span><br><span class="line">Russellville</span><br><span class="line">***********</span><br><span class="line">head</span><br><span class="line">Conway</span><br><span class="line">&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;</span><br><span class="line">Alma</span><br><span class="line">Conway</span><br></pre></td></tr></table></figure>

<h2 id="循环链表"><a href="#循环链表" class="headerlink" title="循环链表"></a>循环链表</h2><p>循环链表和单向链表相似，节点类型也是一样的。唯一的区别是：在创建循环链表时，让其头节点的next属性指向它本身，即：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">head.next = head</span><br></pre></td></tr></table></figure>
<p>这种行为会传导至链表中的每个节点，使得每个节点的next属性都指向链表的头节点。换句话说，链表的尾节点指向头节点，形成了一个循环链表。如下图所示：<br><img src="https://ningning-1259809020.cos.ap-chengdu.myqcloud.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95javascript%E6%8F%8F%E8%BF%B0/%E5%BE%AA%E7%8E%AF%E9%93%BE%E8%A1%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86" alt="循环链表工作原理"></p>
<p>如果你希望可以从后往前遍历链表，但是又不想付出额外代价来创建一个双向链表，那么就需要使用循环链表。从循环链表的尾节点向后移动，就等于从后向前遍历链表。<br>创建循环链表，只需要修改LList类的构造函数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">LList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.head = <span class="keyword">new</span> Node(<span class="string">"head"</span>);</span><br><span class="line">  <span class="keyword">this</span>.head.next = <span class="keyword">this</span>.head;</span><br><span class="line">  <span class="keyword">this</span>.find = find;</span><br><span class="line">  <span class="keyword">this</span>.insert = insert;</span><br><span class="line">  <span class="keyword">this</span>.display = display;</span><br><span class="line">  <span class="keyword">this</span>.findPrevious = findPrevious;</span><br><span class="line">  <span class="keyword">this</span>.remove = remove;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>只需要修改一处就可以将单向链表变成了循环链表。但是其他一些方法需要修改才能工作正常。比如：display()需要修改，原来的方式在循环链表里会陷入死循环。while循环的循环条件需要修改，需要检查头节点，当循环到头节点时推出循环。<br>循环链表的display()方法如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">display</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> currNode = <span class="keyword">this</span>.head;</span><br><span class="line">  <span class="keyword">while</span>(!(currNode.next == <span class="literal">null</span>) &amp;&amp; !(currNode.next.element == <span class="string">"head"</span>)) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(currNode.element);</span><br><span class="line">    currNode = currNode.next;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其他方法与此类似。</p>
<h2 id="约瑟夫环问题"><a href="#约瑟夫环问题" class="headerlink" title="约瑟夫环问题"></a>约瑟夫环问题</h2><p>传说在公元 1 世纪的犹太战争中， 犹太历史学家弗拉维奥· 约瑟夫斯和他的 40 个同胞被罗马士兵包围。 犹太士兵决定宁可自杀也不做俘虏， 于是商量出了一个自杀方案。 他们围成一个圈， 从一个人开始， 数到第三个人时将第三个人杀死， 然后再数， 直到杀光所有人。 约瑟夫和另外一个人决定不参加这个疯狂的游戏， 他们快速地计算出了两个位置， 站在那里得以幸存。 写一段程序将 n 个人围成一圈， 并且第 m 个人会被杀掉， 计算一圈人中哪两个人最后会存活。 使用循环链表解决该问题。</p>
<p>代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">//Node类</span></span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">Node</span><span class="params">(element)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.element = element;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.next = <span class="literal">null</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="comment">//构造函数</span></span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">LList</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.head = <span class="keyword">new</span> Node(<span class="string">"head"</span>);</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.head.next = <span class="keyword">this</span>.head;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.advance = advance;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.currentNode = <span class="keyword">this</span>.head;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.find = find;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.insert = insert;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.remove = remove;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.display = display;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.findPrevious = findPrevious;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.count = count;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="comment">//查找节点</span></span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">find</span><span class="params">(item)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> currNode = <span class="keyword">this</span>.head;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">while</span>(!(currNode.next == <span class="literal">null</span>) &amp;&amp; !(currNode.element == item)) &#123;</span></span><br><span class="line">        currNode = currNode.next</span><br><span class="line">      &#125;</span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> currNode</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="comment">//插入节点</span></span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">insert</span><span class="params">(newElement,item)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> newNode = <span class="keyword">new</span> Node(newElement);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> current = <span class="keyword">this</span>.find(item);</span></span><br><span class="line">      newNode.next = current.next;</span><br><span class="line">      current.next = newNode;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="comment">//找到当前节点的前一个节点</span></span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">findPrevious</span><span class="params">(item)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> currNode = <span class="keyword">this</span>.head;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">while</span>(!(currNode.next.element == <span class="string">"head"</span>) &amp;&amp; (currNode.next.element != item)) &#123;</span></span><br><span class="line">        currNode = currNode.next</span><br><span class="line">      &#125;</span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> currNode</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="comment">//删除节点</span></span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">remove</span><span class="params">(item)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> prevNode = <span class="keyword">this</span>.findPrevious(item);</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">if</span>(!(prevNode.next.element == <span class="string">"head"</span>)) &#123;</span></span><br><span class="line">        prevNode.next = prevNode.next.next;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="comment">//计算有多少节点</span></span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">count</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> node = <span class="keyword">this</span>.head;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> i = <span class="number">0</span>;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">while</span>(!(node.next.element == <span class="string">"head"</span>)) &#123;</span></span><br><span class="line">        node = node.next;</span><br><span class="line">        i++;</span><br><span class="line">      &#125;</span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> i;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="comment">//显示</span></span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> currNode = <span class="keyword">this</span>.head;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">while</span>(!(currNode.next.element == <span class="string">"head"</span>)) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.write(currNode.next.element +  <span class="string">"&amp;nbsp;"</span>);</span></span><br><span class="line">        currNode = currNode.next;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="comment">//向前移动n个节点</span></span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">advance</span> <span class="params">(n)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">while</span> (n&gt;<span class="number">0</span>)&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">if</span>(<span class="keyword">this</span>.currentNode.next.element == <span class="string">"head"</span>)&#123;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">this</span>.currentNode = <span class="keyword">this</span>.currentNode.next.next;</span></span><br><span class="line"><span class="actionscript">        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">this</span>.currentNode = <span class="keyword">this</span>.currentNode.next;</span></span><br><span class="line">        &#125;        </span><br><span class="line">        n--;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> list = <span class="keyword">new</span> LList();</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> n = <span class="number">10</span>;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> temp = <span class="string">"head"</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</span></span><br><span class="line">      list.insert(i,temp);</span><br><span class="line">      temp = i;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> index = <span class="number">0</span>;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> m = <span class="number">3</span>;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">while</span>(list.count() &gt; <span class="number">2</span>) &#123;</span></span><br><span class="line">      list.advance(n);</span><br><span class="line">      list.remove(list.currentNode.element);</span><br><span class="line">      list.display();</span><br><span class="line"><span class="javascript">      <span class="built_in">document</span>.write(<span class="string">'&lt;br&gt;'</span>);</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>假设有10个人，输出结果如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> </span><br><span class="line"><span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> </span><br><span class="line"><span class="number">2</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> </span><br><span class="line"><span class="number">2</span> <span class="number">4</span> <span class="number">5</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> </span><br><span class="line"><span class="number">4</span> <span class="number">5</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> </span><br><span class="line"><span class="number">4</span> <span class="number">5</span> <span class="number">7</span> <span class="number">8</span> </span><br><span class="line"><span class="number">4</span> <span class="number">7</span> <span class="number">8</span> </span><br><span class="line"><span class="number">4</span> <span class="number">8</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ningning0908.github.io/blog/2020/08/03/%E5%89%8D%E7%AB%AF%E9%9D%A2%E7%BB%8F/VUE%E9%9D%A2%E7%BB%8F(%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Ning Ning">
      <meta itemprop="description" content="光、温暖、温柔">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2020/08/03/%E5%89%8D%E7%AB%AF%E9%9D%A2%E7%BB%8F/VUE%E9%9D%A2%E7%BB%8F(%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87)/" class="post-title-link" itemprop="url">vue面经</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-03 08:15:19" itemprop="dateCreated datePublished" datetime="2020-08-03T08:15:19+08:00">2020-08-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-09-08 17:45:42" itemprop="dateModified" datetime="2020-09-08T17:45:42+08:00">2020-09-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E5%89%8D%E7%AB%AF%E9%9D%A2%E7%BB%8F/" itemprop="url" rel="index"><span itemprop="name">前端面经</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="虚拟DOM"><a href="#虚拟DOM" class="headerlink" title="虚拟DOM"></a>虚拟DOM</h2><p>参考：<a href="https://www.cnblogs.com/fundebug/p/vue-virtual-dom.html" target="_blank" rel="noopener">https://www.cnblogs.com/fundebug/p/vue-virtual-dom.html</a><br>Virtual DOM 其实就是一棵以 JavaScript 对象( VNode 节点)作为基础的树，用对象属性来描述节点，实际上它只是一层对真实 DOM 的抽象。最终可以通过一系列操作使这棵树映射到真实环境上。简单来说，可以把Virtual DOM 理解为一个简单的JS对象，并且最少包含标签名( tag)、属性(attrs)和子元素对象( children)三个属性。不同的框架对这三个属性的命名会有点差别。对于虚拟DOM，咱们来看一个简单的实例，就是下图所示的这个，详细的<code>阐述了模板 → 渲染函数 → 虚拟DOM树 → 真实DOM</code>的一个过程<br><img src="https://ningning-1259809020.cos.ap-chengdu.myqcloud.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95javascript%E6%8F%8F%E8%BF%B0/%E8%99%9A%E6%8B%9FDOM.png" alt="虚拟DOM"></p>
<h3 id="虚拟DOM的作用是什么？"><a href="#虚拟DOM的作用是什么？" class="headerlink" title="虚拟DOM的作用是什么？"></a>虚拟DOM的作用是什么？</h3><div class="note info">
            <p><strong>虚拟DOM的最终目标是将虚拟节点渲染到视图上。</strong>但是如果直接使用虚拟节点覆盖旧节点的话，会有很多不必要的DOM操作。例如，一个ul标签下很多个li标签，其中只有一个li有变化，这种情况下如果使用新的ul去替代旧的ul,因为这些不必要的DOM操作而造成了性能上的浪费。为了避免不必要的DOM操作，虚拟DOM在虚拟节点映射到视图的过程中，将虚拟节点与上一次渲染视图所使用的旧虚拟节点（oldVnode）做对比，找出真正需要更新的节点来进行DOM操作，从而避免操作其他无需改动的DOM。</p><p>其实虚拟DOM在Vue.js主要做了两件事：</p><ul><li>提供与真实DOM节点所对应的虚拟节点vnode</li><li>将虚拟节点vnode和旧虚拟节点oldVnode进行对比，然后更新视图</li></ul>
          </div>

<h3 id="为何需要Virtual-DOM？"><a href="#为何需要Virtual-DOM？" class="headerlink" title="为何需要Virtual DOM？"></a>为何需要Virtual DOM？</h3><div class="note info">
            <ul><li><p><strong>具备跨平台的优势。</strong> 由于 Virtual DOM 是以 JavaScript 对象为基础而不依赖真实平台环境，所以使它具有了跨平台的能力，比如说浏览器平台、Weex、Node 等。</p></li><li><p><strong>操作 DOM 慢，js运行效率高。我们可以将DOM对比操作放在JS层，提高效率。</strong>因为DOM操作的执行速度远不如Javascript的运算速度快，因此，把大量的DOM操作搬运到Javascript中，运用patching算法来计算出真正需要更新的节点，最大限度地减少DOM操作，从而显著提高性能。 Virtual DOM 本质上就是在 JS 和 DOM 之间做了一个缓存。可以类比 CPU 和硬盘，既然硬盘这么慢，我们就在它们之间加个缓存：既然 DOM 这么慢，我们就在它们 JS 和 DOM 之间加个缓存。CPU（JS）只操作内存（Virtual DOM），最后的时候再把变更写入硬盘（DOM）</p></li><li><p><strong>提升渲染性能</strong>。Virtual DOM的优势不在于单次的操作，而是在大量、频繁的数据更新下，能够对视图进行合理、高效的更新。</p></li></ul>
          </div>

<h2 id="vue双向绑定原理"><a href="#vue双向绑定原理" class="headerlink" title="vue双向绑定原理"></a>vue双向绑定原理</h2><p>参考：<a href="https://www.cnblogs.com/wangjiachen666/p/9883916.html" target="_blank" rel="noopener">https://www.cnblogs.com/wangjiachen666/p/9883916.html</a></p>
<p>Vue内部通过<code>Object.defineProperty</code>方法属性拦截的方式，把<code>data</code>对象里每个数据的读写转化成<code>getter</code>/<code>setter</code>，当数据变化时通知视图更新。</p>
<p>所谓MVVM数据双向绑定，即主要是：数据变化更新视图，视图变化更新数据。如下图：<br><img src="https://ningning-1259809020.cos.ap-chengdu.myqcloud.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95javascript%E6%8F%8F%E8%BF%B0/MVVM%E5%8F%8C%E5%90%91%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A.jpg" alt="MVVM双向数据绑定原理"></p>
<div class="note info">
            <p>也就是说：</p><ul><li>输入框内容变化时，data 中的数据同步变化。即 view =&gt; model 的变化。</li><li>data 中的数据变化时，文本节点的内容同步变化。即 model =&gt; view 的变化。</li></ul>
          </div>

<p>实现数据的双向绑定，首先要对数据进行劫持监听，所以我们需要设置一个监听器<code>Observer</code>，用来监听所有属性。如果属性发上变化了，就需要告诉订阅者<code>Watcher</code>看是否需要更新。因为订阅者是有很多个，所以我们需要有一个消息订阅器<code>Dep</code>来专门收集这些订阅者，然后在监听器<code>Observer</code>和订阅者<code>Watcher</code>之间进行统一管理的。订阅者得到数据改变的消息后再对DOM进行编译操作。<br><img src="https://ningning-1259809020.cos.ap-chengdu.myqcloud.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95javascript%E6%8F%8F%E8%BF%B0/%E8%AE%A2%E9%98%85%E8%80%85-%E5%8F%91%E5%B8%83%E8%80%85.png" alt="订阅者-发布者"></p>
<h2 id="说说Vuex的作用以及应用场景"><a href="#说说Vuex的作用以及应用场景" class="headerlink" title="说说Vuex的作用以及应用场景"></a>说说Vuex的作用以及应用场景</h2><p>项目数据状态的集中管理，复杂组件(如兄弟组件、远房亲戚组件)的数据通信问题。</p>
<h2 id="说说Vue组件的数据通信方式"><a href="#说说Vue组件的数据通信方式" class="headerlink" title="说说Vue组件的数据通信方式"></a>说说Vue组件的数据通信方式</h2><p>父传子—-》props  子传父—-》$emit</p>
<h2 id="谈一下你对MVVM原理的理解"><a href="#谈一下你对MVVM原理的理解" class="headerlink" title="谈一下你对MVVM原理的理解"></a>谈一下你对<code>MVVM</code>原理的理解</h2><p><img src="https://ningning-1259809020.cos.ap-chengdu.myqcloud.com/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/MVVM%E4%B8%8EMVC.png" alt="MVVM与MVC的简单理解"></p>
<div class="note info">
            <ul><li>传统的MVC指的是用户操作会请求服务端路由，路由会调用对应的控制器来处理，控制器会获取数据，将结果返回给前端，页面重新渲染；</li><li><code>MVVM</code>: 传统的前端会将数据手动渲染到页面上，<code>MVVM</code>模式不需要用户收到操作<code>DOM</code>元素，将数据绑定到<code>viewModel</code>层上，会自动将数据渲染到页面上，视图变化会通知<code>viewModel</code>层更新数据，<code>viewModel</code>就是我们MVVM模式中的桥梁；</li></ul>
          </div>

<h2 id="请说一下响应式数据的原理？"><a href="#请说一下响应式数据的原理？" class="headerlink" title="请说一下响应式数据的原理？"></a>请说一下响应式数据的原理？</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ningning0908.github.io/blog/2020/07/24/%E5%89%8D%E7%AB%AF%E9%9D%A2%E7%BB%8F/HTTP%E7%8A%B6%E6%80%81%E7%A0%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Ning Ning">
      <meta itemprop="description" content="光、温暖、温柔">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2020/07/24/%E5%89%8D%E7%AB%AF%E9%9D%A2%E7%BB%8F/HTTP%E7%8A%B6%E6%80%81%E7%A0%81/" class="post-title-link" itemprop="url">HTTP常用状态码</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-07-24 22:31:53" itemprop="dateCreated datePublished" datetime="2020-07-24T22:31:53+08:00">2020-07-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-21 22:38:26" itemprop="dateModified" datetime="2020-08-21T22:38:26+08:00">2020-08-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E5%89%8D%E7%AB%AF%E9%9D%A2%E7%BB%8F/" itemprop="url" rel="index"><span itemprop="name">前端面经</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <div class="note info">
            <p>下面是常见的HTTP状态码：</p><ul><li>200 - 请求成功</li><li>301 - 资源（网页等）被永久转移到其它URL</li><li>404 - 请求的资源（网页等）不存在</li><li>500 - 内部服务器错误</li><li>504 - （网关超时） 服务器作为网关或代理，但是没有及时从上游服务器收到请求。</li></ul>
          </div>

<p><strong>具体见下面博客</strong>：<a href="https://www.cnblogs.com/xflonga/p/9368993.html" target="_blank" rel="noopener">https://www.cnblogs.com/xflonga/p/9368993.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ningning0908.github.io/blog/2020/07/24/%E5%89%8D%E7%AB%AF%E9%9D%A2%E7%BB%8F/%E5%8E%9F%E7%94%9FAjax%E4%B8%8EPromise%E7%9A%84%E7%BB%93%E5%90%88%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Ning Ning">
      <meta itemprop="description" content="光、温暖、温柔">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2020/07/24/%E5%89%8D%E7%AB%AF%E9%9D%A2%E7%BB%8F/%E5%8E%9F%E7%94%9FAjax%E4%B8%8EPromise%E7%9A%84%E7%BB%93%E5%90%88%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">原生Ajax与Promise的结合使用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-07-24 21:55:25" itemprop="dateCreated datePublished" datetime="2020-07-24T21:55:25+08:00">2020-07-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-25 13:39:39" itemprop="dateModified" datetime="2020-07-25T13:39:39+08:00">2020-07-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E5%89%8D%E7%AB%AF%E9%9D%A2%E7%BB%8F/" itemprop="url" rel="index"><span itemprop="name">前端面经</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在面试京东提前批一面的时候，面试官让手写一个原生js写Ajax请求与Promise相结合的使用，保证执行顺序，在第一个请求正确返回后再发送第二个请求。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 原生js写Ajax请求对象ajaxPromise(使用Promise的ajax请求)</span></span><br><span class="line"><span class="keyword">const</span> ajaxPromise = <span class="function"><span class="params">param</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//在这里不考虑IE7以下的浏览器兼容问题</span></span><br><span class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    xhr.open(param.type || <span class="string">"get"</span>, param.url, <span class="literal">true</span>);</span><br><span class="line">    xhr.send(param.data || <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">    xhr.onreadystatechange = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> DONE = <span class="number">4</span>;   <span class="comment">//readyState 4 代表已经向服务器发送请求，并接收到全部数据</span></span><br><span class="line">      <span class="keyword">var</span> OK = <span class="number">200</span>;   <span class="comment">// status 200 代表服务器返回成功</span></span><br><span class="line">      <span class="keyword">if</span> (xhr.readyState === DONE) &#123;</span><br><span class="line">        <span class="keyword">if</span>(xhr.status === OK) &#123;</span><br><span class="line">          resolve(<span class="built_in">JSON</span>.parse(xhr.responseText));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          reject(<span class="built_in">JSON</span>.parse(xhr.responseText));</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第一个请求</span></span><br><span class="line"><span class="keyword">let</span> step1 = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  ajaxPromise(&#123;</span><br><span class="line">    <span class="string">"url"</span>: <span class="string">""</span>,</span><br><span class="line">  &#125;).then( <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"第一个请求正确返回==&gt;"</span> + res);</span><br><span class="line">    step2(res)</span><br><span class="line">  &#125;).catch( <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"第一个请求失败"</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//第二个请求</span></span><br><span class="line"><span class="keyword">let</span> step2 = <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  ajaxPromise(&#123;</span><br><span class="line">    <span class="string">"type"</span>: <span class="string">"get"</span>,</span><br><span class="line">    <span class="string">"url"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="string">"data"</span>: &#123;<span class="string">"name"</span>: res&#125;</span><br><span class="line">  &#125;).then( <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"第二个请求正确返回==&gt;"</span> + res);</span><br><span class="line">  &#125;).catch( <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"第二个请求失败"</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ningning0908.github.io/blog/2020/07/23/%E5%89%8D%E7%AB%AF%E9%9D%A2%E7%BB%8F/html5%20%E6%96%B0%E5%A2%9E%E5%85%83%E7%B4%A0%E4%BB%A5%E5%8F%8Acss3%E6%96%B0%E7%89%B9%E6%80%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Ning Ning">
      <meta itemprop="description" content="光、温暖、温柔">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2020/07/23/%E5%89%8D%E7%AB%AF%E9%9D%A2%E7%BB%8F/html5%20%E6%96%B0%E5%A2%9E%E5%85%83%E7%B4%A0%E4%BB%A5%E5%8F%8Acss3%E6%96%B0%E7%89%B9%E6%80%A7/" class="post-title-link" itemprop="url">html5 新增元素以及css3新特性</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-07-23 18:23:23" itemprop="dateCreated datePublished" datetime="2020-07-23T18:23:23+08:00">2020-07-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-09 07:51:34" itemprop="dateModified" datetime="2020-08-09T07:51:34+08:00">2020-08-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E5%89%8D%E7%AB%AF%E9%9D%A2%E7%BB%8F/" itemprop="url" rel="index"><span itemprop="name">前端面经</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="HTML5"><a href="#HTML5" class="headerlink" title="HTML5"></a>HTML5</h2><h3 id="HTML5-新元素"><a href="#HTML5-新元素" class="headerlink" title="HTML5 新元素"></a>HTML5 新元素</h3><p>HTML5提供了新的元素来创建更好的页面结构：</p>
<table>
<thead>
<tr>
<th>HTML5元素</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;article&gt;</code></td>
<td>定义页面独立的内容区域</td>
</tr>
<tr>
<td><code>&lt;aside&gt;</code></td>
<td>定义页面的侧边栏内容</td>
</tr>
<tr>
<td><code>&lt;bdi&gt;</code></td>
<td>允许您设置一段文本，使其脱离父元素的文本方向设置（目前只有 Firefox 和 Chrome 浏览器支持 bdi 标签）</td>
</tr>
<tr>
<td><code>&lt;command&gt;</code></td>
<td>定义命令按钮，比如单选按钮、复选框或按钮</td>
</tr>
<tr>
<td><code>&lt;details&gt;</code></td>
<td>用于描述文档或文档某个部分的细节</td>
</tr>
<tr>
<td><code>&lt;dialog&gt;</code></td>
<td>定义对话框，比如提示框</td>
</tr>
<tr>
<td><code>&lt;summary&gt;</code></td>
<td>标签包含 <code>&lt;details&gt;</code> 元素的标题</td>
</tr>
<tr>
<td><code>&lt;figure&gt;</code></td>
<td>规定独立的流内容（图像、图表、照片、代码等等）</td>
</tr>
<tr>
<td><code>&lt;figcaption&gt;</code></td>
<td>定义 <code>&lt;figure&gt;</code> 元素的标题</td>
</tr>
<tr>
<td><code>&lt;footer&gt;</code></td>
<td>定义 section 或 document 的页脚</td>
</tr>
<tr>
<td><code>&lt;header&gt;</code></td>
<td>定义了文档的头部区域</td>
</tr>
<tr>
<td><code>&lt;mark&gt;</code></td>
<td>定义带有记号的文本。</td>
</tr>
<tr>
<td><code>&lt;meter&gt;</code></td>
<td>定义度量衡。仅用于已知最大和最小值的度量</td>
</tr>
<tr>
<td><code>&lt;nav&gt;</code></td>
<td>定义导航链接的部分</td>
</tr>
<tr>
<td><code>&lt;progress&gt;</code></td>
<td>定义任何类型的任务的进度</td>
</tr>
<tr>
<td><code>&lt;ruby&gt;</code></td>
<td>定义 <code>ruby</code> 注释（中文注音或字符）</td>
</tr>
<tr>
<td><code>&lt;rt&gt;</code></td>
<td>定义字符（中文注音或字符）的解释或发音</td>
</tr>
<tr>
<td><code>&lt;rp&gt;</code></td>
<td>在 <code>ruby</code> 注释中使用，定义不支持 <code>ruby</code> 元素的浏览器所显示的内容</td>
</tr>
<tr>
<td><code>&lt;section&gt;</code></td>
<td>定义文档中的节（section、区段）</td>
</tr>
<tr>
<td><code>&lt;time&gt;</code></td>
<td>定义日期或时间</td>
</tr>
<tr>
<td><code>&lt;wbr&gt;</code></td>
<td>规定在文本中的何处适合添加换行符</td>
</tr>
</tbody></table>
<h3 id="HTML5-Canvas"><a href="#HTML5-Canvas" class="headerlink" title="HTML5 Canvas"></a>HTML5 Canvas</h3><div class="note info">
            <p>HTML5 <code>&lt;canvas&gt;</code> 元素用于图形的绘制，通过脚本 (通常是JavaScript)来完成.</p><ul><li><code>&lt;canvas&gt;</code>标签只是图形容器，您必须使用脚本来绘制图形。</li><li>使用 <code>JavaScript</code> 来绘制图像, <code>canvas</code> 元素本身是没有绘图能力的。所有的绘制工作必须在 <code>JavaScript</code> 内部完成</li></ul>
          </div>
<p><code>&lt;canvas&gt;</code>简单实例如下:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"myCanvas"</span><span class="attr">width</span>=<span class="string">"200"</span><span class="attr">height</span>=<span class="string">"100"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> c=<span class="built_in">document</span>.getElementById(<span class="string">"myCanvas"</span>);</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">var</span> ctx=c.getContext(<span class="string">"2d"</span>);</span></span><br><span class="line"><span class="actionscript">  ctx.fillStyle=<span class="string">"#FF0000"</span>;</span></span><br><span class="line">  ctx.fillRect(0,0,150,75);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="HTML5-拖放"><a href="#HTML5-拖放" class="headerlink" title="HTML5 拖放"></a>HTML5 拖放</h3><p><strong>拖放（<code>Drag</code> 和 <code>drop</code>）是 <code>HTML5</code> 标准的组成部分。</strong></p>
<p>拖放是一种常见的特性，即抓取对象以后拖到另一个位置。在 <code>HTML5</code> 中，拖放是标准的一部分，任何元素都能够拖放。</p>
<h4 id="HTML5-拖放实例"><a href="#HTML5-拖放实例" class="headerlink" title="HTML5 拖放实例"></a>HTML5 拖放实例</h4><p>下面的例子是一个简单的拖放实例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript">      <span class="function"><span class="keyword">function</span> <span class="title">allowDrop</span><span class="params">(ev)</span></span></span></span><br><span class="line">      &#123;</span><br><span class="line">        ev.preventDefault();</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="function"><span class="keyword">function</span> <span class="title">drag</span><span class="params">(ev)</span></span></span></span><br><span class="line">      &#123;</span><br><span class="line"><span class="actionscript">        ev.dataTransfer.setData(<span class="string">"Text"</span>,ev.target.id);</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="function"><span class="keyword">function</span> <span class="title">drop</span><span class="params">(ev)</span></span></span></span><br><span class="line">      &#123;</span><br><span class="line">        ev.preventDefault();</span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> data=ev.dataTransfer.getData(<span class="string">"Text"</span>);</span></span><br><span class="line"><span class="javascript">        ev.target.appendChild(<span class="built_in">document</span>.getElementById(data));</span></span><br><span class="line">      &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span> <span class="attr">ondrop</span>=<span class="string">"drop(event)"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">ondragover</span>=<span class="string">"allowDrop(event)"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">"drag1"</span> <span class="attr">src</span>=<span class="string">"img_logo.gif"</span> <span class="attr">draggable</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">ondragstart</span>=<span class="string">"drag(event)"</span> <span class="attr">width</span>=<span class="string">"336"</span> <span class="attr">height</span>=<span class="string">"69"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="设置元素为可拖放"><a href="#设置元素为可拖放" class="headerlink" title="设置元素为可拖放"></a>设置元素为可拖放</h4><p>首先，为了使元素可拖动，把 draggable 属性设置为 true </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">draggable</span>=<span class="string">"true"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="拖动什么-ondragstart-和-setData"><a href="#拖动什么-ondragstart-和-setData" class="headerlink" title="拖动什么 - ondragstart 和 setData()"></a>拖动什么 - ondragstart 和 setData()</h4><p>然后，规定当元素被拖动时，会发生什么。</p>
<p>在上面的例子中，<code>ondragstart</code> 属性调用了一个函数，<code>drag(event)</code>，它规定了被拖动的数据。</p>
<p><code>dataTransfer.setData()</code> 方法设置被拖数据的数据类型和值：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">drag</span>(<span class="params">ev</span>) </span>&#123;</span><br><span class="line">  ev.dataTransfer.setData(<span class="string">"Text"</span>,ev.target.id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在这个例子中，数据类型是 <code>&quot;Text&quot;</code>，值是可拖动元素的 <code>id (&quot;drag1&quot;)</code>。</p>
<h4 id="放到何处-ondragover"><a href="#放到何处-ondragover" class="headerlink" title="放到何处 - ondragover"></a>放到何处 - ondragover</h4><p><code>ondragover</code> 事件规定在何处放置被拖动的数据。</p>
<p><strong>默认地，无法将数据/元素放置到其他元素中。如果需要设置允许放置，我们必须阻止对元素的默认处理方式。</strong></p>
<p>这要通过调用 <code>ondragover</code> 事件的 <code>event.preventDefault()</code> 方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">event.preventDefault()</span><br></pre></td></tr></table></figure>

<h4 id="进行放置-ondrop"><a href="#进行放置-ondrop" class="headerlink" title="进行放置 - ondrop"></a>进行放置 - ondrop</h4><p>当放置被拖数据时，会发生 <code>drop</code> 事件。</p>
<p>在上面的例子中，ondrop 属性调用了一个函数，<code>drop(event)</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">drop</span>(<span class="params">ev</span>) </span>&#123;</span><br><span class="line">  ev.preventDefault();</span><br><span class="line">  <span class="keyword">var</span> data = ev.dataTransfer.getData(<span class="string">"Text"</span>);</span><br><span class="line">  ev.target.appendChild(<span class="built_in">document</span>.getElementById(data));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div class="note info">
            <p>代码解释：</p><ul><li>调用 <code>preventDefault()</code> 来避免浏览器对数据的默认处理（drop 事件的默认行为是以链接形式打开）;</li><li>通过 <code>dataTransfer.getData(&quot;Text&quot;)</code> 方法获得被拖的数据。该方法将返回在 <code>setData()</code> 方法中设置为相同类型的任何数据;</li><li>被拖数据是被拖元素的 <code>id (&quot;drag1&quot;)</code>;</li><li>把被拖元素追加到放置元素（目标元素）中。</li></ul>
          </div>

<h4 id="HTML-5-Canvas（画布）"><a href="#HTML-5-Canvas（画布）" class="headerlink" title="HTML 5 Canvas（画布）"></a>HTML 5 Canvas（画布）</h4><p><code>canvas</code> 元素用于在网页上绘制图形。</p>
<h4 id="什么是-Canvas？"><a href="#什么是-Canvas？" class="headerlink" title="什么是 Canvas？"></a>什么是 Canvas？</h4><div class="note info">
            <ul><li>HTML5 的 <code>canvas</code> 元素使用 JavaScript 在网页上绘制图像。</li><li>画布是一个矩形区域，您可以控制其每一像素。</li><li><code>canvas</code> 拥有多种绘制路径、矩形、圆形、字符以及添加图像的方法。</li></ul>
          </div>

<h4 id="创建-Canvas-元素"><a href="#创建-Canvas-元素" class="headerlink" title="创建 Canvas 元素"></a>创建 Canvas 元素</h4><p>向 HTML5 页面添加 <code>canvas</code> 元素。规定元素的 id、宽度和高度：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"myCanvas"</span> <span class="attr">width</span>=<span class="string">"200"</span> <span class="attr">height</span>=<span class="string">"100"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="通过-JavaScript-来绘制"><a href="#通过-JavaScript-来绘制" class="headerlink" title="通过 JavaScript 来绘制"></a>通过 JavaScript 来绘制</h4><p><strong>canvas 元素本身是没有绘图能力的。所有的绘制工作必须在 JavaScript 内部完成：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="comment">//JavaScript 使用 id 来寻找 canvas 元素：</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> c = <span class="built_in">document</span>.getElementById(<span class="string">"myCanvas"</span>);</span></span><br><span class="line"><span class="actionscript">  <span class="comment">//创建 context 对象,getContext("2d") 对象是内建的 HTML5 对象，拥有多种绘制路径、矩形、圆形、字符以及添加图像的方法。</span></span></span><br><span class="line"><span class="actionscript">  <span class="keyword">var</span> cxt = c.getContext(<span class="string">"2d"</span>);</span></span><br><span class="line"><span class="actionscript">  <span class="comment">//下面的两行代码绘制一个红色的矩形,fillStyle 方法将其染成红色，fillRect 方法规定了形状、位置和尺寸</span></span></span><br><span class="line"><span class="actionscript">  cxt.fillStyle = <span class="string">"#FF0000"</span>;</span></span><br><span class="line">  cxt.fillRect(0,0,150,75);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>上面的 <code>fillRect</code> 方法拥有参数 <code>(0,0,150,75)</code>。意思是：在画布上绘制 <code>150x75</code> 的矩形，从左上角开始 <code>(0,0)</code>。如下图所示，画布的 X 和 Y 坐标用于在画布上对绘画进行定位。</p>
<p><img src="https://ningning-1259809020.cos.ap-chengdu.myqcloud.com/HTML5/canvas%E7%BB%98%E5%9B%BE%E7%9A%84fillRect.gif" alt="attr"></p>
<h3 id="HTML5-内联-SVG"><a href="#HTML5-内联-SVG" class="headerlink" title="HTML5 内联 SVG"></a>HTML5 内联 SVG</h3><p><strong>HTML5 支持内联 SVG。</strong></p>
<div class="note info">
            <p>什么是SVG？</p><ul><li>SVG 指可伸缩矢量图形 (Scalable Vector Graphics)</li><li>SVG 用于定义用于网络的基于矢量的图形</li><li>SVG 使用 XML 格式定义图形</li><li>SVG 图像在放大或改变尺寸的情况下其图形质量不会有损失</li><li>SVG 是万维网联盟的标准</li></ul>
          </div>
<div class="note info">
            <p>SVG 的优势</p><ul><li>与其他图像格式相比（比如 JPEG 和 GIF），使用 SVG 的优势在于：</li><li>SVG 图像可通过文本编辑器来创建和修改</li><li>SVG 图像可被搜索、索引、脚本化或压缩</li><li>SVG 是可伸缩的</li><li>SVG 图像可在任何的分辨率下被高质量地打印</li><li>SVG 可在图像质量不下降的情况下被放大</li></ul>
          </div>

<h4 id="把-SVG-直接嵌入-HTML-页面"><a href="#把-SVG-直接嵌入-HTML-页面" class="headerlink" title="把 SVG 直接嵌入 HTML 页面"></a>把 SVG 直接嵌入 HTML 页面</h4><p>在 HTML5 中，您能够将 SVG 元素直接嵌入 HTML 页面中：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span> <span class="attr">version</span>=<span class="string">"1.1"</span> <span class="attr">height</span>=<span class="string">"190"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">polygon</span> <span class="attr">points</span>=<span class="string">"100,10 40,180 190,60 10,60 160,180"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">style</span>=<span class="string">"fill:lime;stroke:purple;stroke-width:5;fill-rule:evenodd;"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://ningning-1259809020.cos.ap-chengdu.myqcloud.com/HTML5/HTML5%20SVG%E5%86%85%E8%81%94.png" alt="attr"></p>
<h3 id="Canvas-与-SVG-的比较"><a href="#Canvas-与-SVG-的比较" class="headerlink" title="Canvas 与 SVG 的比较"></a>Canvas 与 SVG 的比较</h3><div class="note info">
            <p>Canvas</p><ul><li>依赖分辨率</li><li>不支持事件处理器</li><li>弱的文本渲染能力</li><li>能够以 .png 或 .jpg 格式保存结果图像</li><li>最适合图像密集型的游戏，其中的许多对象会被频繁重绘</li></ul><p>SVG</p><ul><li>不依赖分辨率</li><li>支持事件处理器</li><li>最适合带有大型渲染区域的应用程序（比如谷歌地图）</li><li>复杂度高会减慢渲染速度（任何过度使用 DOM 的应用都不快）</li><li>不适合游戏应用</li></ul>
          </div>

<h3 id="HTML5-地理定位"><a href="#HTML5-地理定位" class="headerlink" title="HTML5 地理定位"></a>HTML5 地理定位</h3><p><strong>HTML5 Geolocation（地理定位）用于定位用户的位置。</strong></p>
<h4 id="定位用户的位置"><a href="#定位用户的位置" class="headerlink" title="定位用户的位置"></a>定位用户的位置</h4><p>HTML5 Geolocation API 用于获得用户的地理位置。<br>鉴于该特性可能侵犯用户的隐私，除非用户同意，否则用户位置信息是不可用的。</p>
<h4 id="HTML5-使用地理定位"><a href="#HTML5-使用地理定位" class="headerlink" title="HTML5 - 使用地理定位"></a>HTML5 - 使用地理定位</h4><p>请使用 <code>getCurrentPosition()</code> 方法来获得用户的位置。下例是一个简单的地理定位实例，可返回用户位置的经度和纬度。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> x=<span class="built_in">document</span>.getElementById(<span class="string">"demo"</span>);</span></span><br><span class="line"><span class="actionscript">  <span class="function"><span class="keyword">function</span> <span class="title">getLocation</span><span class="params">()</span></span></span></span><br><span class="line">    &#123;</span><br><span class="line">    if (navigator.geolocation)</span><br><span class="line">      &#123;</span><br><span class="line">      navigator.geolocation.getCurrentPosition(showPosition);</span><br><span class="line">      &#125;</span><br><span class="line"><span class="actionscript">    <span class="keyword">else</span>&#123;x.innerHTML=<span class="string">"Geolocation is not supported by this browser."</span>;&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">  <span class="function"><span class="keyword">function</span> <span class="title">showPosition</span><span class="params">(position)</span></span></span></span><br><span class="line">    &#123;</span><br><span class="line"><span class="actionscript">    x.innerHTML=<span class="string">"Latitude: "</span> + position.coords.latitude +</span></span><br><span class="line"><span class="actionscript">    <span class="string">"&lt;br /&gt;Longitude: "</span> + position.coords.longitude;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<div class="note info">
            <p>例子解释：</p><ul><li>检测是否支持地理定位</li><li>如果支持，则运行 getCurrentPosition() 方法。如果不支持，则向用户显示一段消息。</li><li>如果getCurrentPosition()运行成功，则向参数showPosition中规定的函数返回一个coordinates对象</li><li>showPosition() 函数获得并显示经度和纬度</li></ul>
          </div>

<h4 id="处理错误和拒绝"><a href="#处理错误和拒绝" class="headerlink" title="处理错误和拒绝"></a>处理错误和拒绝</h4><p><code>getCurrentPosition()</code> 方法的第二个参数用于处理错误。它规定当获取用户位置失败时运行的函数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showError</span>(<span class="params">error</span>)</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span>(error.code)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> error.PERMISSION_DENIED:</span><br><span class="line">      x.innerHTML=<span class="string">"User denied the request for Geolocation."</span></span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> error.POSITION_UNAVAILABLE:</span><br><span class="line">      x.innerHTML=<span class="string">"Location information is unavailable."</span></span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> error.TIMEOUT:</span><br><span class="line">      x.innerHTML=<span class="string">"The request to get user location timed out."</span></span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> error.UNKNOWN_ERROR:</span><br><span class="line">      x.innerHTML=<span class="string">"An unknown error occurred."</span></span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<div class="note info">
            <p>错误代码：</p><ul><li>Permission denied - 用户不允许地理定位</li><li>Position unavailable - 无法获取当前位置</li><li>Timeout - 操作超时</li></ul>
          </div>

<h4 id="在地图中显示结果"><a href="#在地图中显示结果" class="headerlink" title="在地图中显示结果"></a>在地图中显示结果</h4><p>如需在地图中显示结果，您需要访问可使用经纬度的地图服务，比如谷歌地图或百度地图：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showPosition</span>(<span class="params">position</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">var</span> latlon=position.coords.latitude+<span class="string">","</span>+position.coords.longitude;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> img_url=<span class="string">"http://maps.googleapis.com/maps/api/staticmap?center="</span></span><br><span class="line">              +latlon+<span class="string">"&amp;zoom=14&amp;size=400x300&amp;sensor=false"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">"mapholder"</span>).innerHTML=<span class="string">"&lt;img src='"</span>+img_url+<span class="string">"' /&gt;"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="getCurrentPosition-方法-返回数据"><a href="#getCurrentPosition-方法-返回数据" class="headerlink" title="getCurrentPosition() 方法 - 返回数据"></a>getCurrentPosition() 方法 - 返回数据</h4><p>若成功，则 <code>getCurrentPosition()</code> 方法返回对象。始终会返回 <code>latitude</code>、<code>longitude</code> 以及 <code>accuracy</code> 属性。如果可用，则会返回其他下面的属性。<br>属性             |    描述<br>—————–|—————————–<br>coords.latitude  | 十进制数的纬度<br>coords.longitude | 十进制数的经度<br>coords.accuracy  |     位置精度<br>coords.altitude  | 海拔，海平面以上以米计<br>coords.altitudeAccuracy | 位置的海拔精度<br>coords.heading   | 方向，从正北开始以度计<br>coords.speed     | 速度，以米/每秒计<br>timestamp        | 响应的日期/时间</p>
<h4 id="Geolocation-对象-其他有趣的方法"><a href="#Geolocation-对象-其他有趣的方法" class="headerlink" title="Geolocation 对象 - 其他有趣的方法"></a>Geolocation 对象 - 其他有趣的方法</h4><p><code>watchPosition()</code> - 返回用户的当前位置，并继续返回用户移动时的更新位置（就像汽车上的 GPS）。<br><code>clearWatch()</code> - 停止 <code>watchPosition()</code> 方法<br>下面的例子展示 <code>watchPosition()</code> 方法。您需要一台精确的 <code>GPS</code> 设备来测试该例（比如 iPhone）：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> x=<span class="built_in">document</span>.getElementById(<span class="string">"demo"</span>);</span></span><br><span class="line"><span class="actionscript"><span class="function"><span class="keyword">function</span> <span class="title">getLocation</span><span class="params">()</span></span></span></span><br><span class="line">  &#123;</span><br><span class="line">  if (navigator.geolocation)</span><br><span class="line">    &#123;</span><br><span class="line">    navigator.geolocation.watchPosition(showPosition);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">  <span class="keyword">else</span>&#123;x.innerHTML=<span class="string">"Geolocation is not supported by this browser."</span>;&#125;</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="actionscript"><span class="function"><span class="keyword">function</span> <span class="title">showPosition</span><span class="params">(position)</span></span></span></span><br><span class="line">  &#123;</span><br><span class="line"><span class="actionscript">  x.innerHTML=<span class="string">"Latitude: "</span> + position.coords.latitude +</span></span><br><span class="line"><span class="actionscript">  <span class="string">"&lt;br /&gt;Longitude: "</span> + position.coords.longitude;</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="HTML5-Audio-音频-、Video-视频"><a href="#HTML5-Audio-音频-、Video-视频" class="headerlink" title="HTML5  Audio(音频)、Video(视频)"></a>HTML5  Audio(音频)、Video(视频)</h3><p>HTML5 规定了一种通过 <code>video</code> 元素来包含视频的标准方法。</p>
<h4 id="lt-video-gt-标签的属性如下："><a href="#lt-video-gt-标签的属性如下：" class="headerlink" title="&lt;video&gt; 标签的属性如下："></a><code>&lt;video&gt;</code> 标签的属性如下：</h4><table>
<thead>
<tr>
<th>属性</th>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>autoplay</td>
<td>autoplay</td>
<td>如果出现该属性，则视频在就绪后马上播放</td>
</tr>
<tr>
<td>controls</td>
<td>controls</td>
<td>如果出现该属性，则向用户显示控件，比如播放按钮</td>
</tr>
<tr>
<td>height</td>
<td>pixels</td>
<td>设置视频播放器的高度</td>
</tr>
<tr>
<td>loop</td>
<td>loop</td>
<td>如果出现该属性，则当媒介文件完成播放后再次开始播放</td>
</tr>
<tr>
<td>preload</td>
<td>preload</td>
<td>如果出现该属性，则视频在页面加载时进行加载，并预备播放,如果使用 “autoplay”，则忽略该属性。</td>
</tr>
<tr>
<td>src</td>
<td>url</td>
<td>要播放的视频的 URL</td>
</tr>
<tr>
<td>width</td>
<td>pixels</td>
<td>设置视频播放器的宽度</td>
</tr>
</tbody></table>
<p>例子如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">width</span>=<span class="string">"320"</span> <span class="attr">height</span>=<span class="string">"240"</span> <span class="attr">controls</span>=<span class="string">"controls"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"movie.ogg"</span> <span class="attr">type</span>=<span class="string">"video/ogg"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"movie.mp4"</span> <span class="attr">type</span>=<span class="string">"video/mp4"</span>&gt;</span></span><br><span class="line">Your browser does not support the video tag.</span><br><span class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="HTML5-lt-video-gt-方法、属性以及事件"><a href="#HTML5-lt-video-gt-方法、属性以及事件" class="headerlink" title="HTML5 &lt;video&gt; - 方法、属性以及事件"></a>HTML5 <code>&lt;video&gt;</code> - 方法、属性以及事件</h4><p>下面列出了大多数浏览器支持的视频方法、属性和事件：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>属性</th>
<th>事件</th>
</tr>
</thead>
<tbody><tr>
<td>play()</td>
<td>currentSrc</td>
<td>play</td>
</tr>
<tr>
<td>pause()</td>
<td>currentTime</td>
<td>pause</td>
</tr>
<tr>
<td>load()</td>
<td>videoWidth</td>
<td>progress</td>
</tr>
<tr>
<td>canPlayType</td>
<td>videoHeight</td>
<td>error</td>
</tr>
<tr>
<td></td>
<td>duration</td>
<td>timeupdate</td>
</tr>
<tr>
<td></td>
<td>ended</td>
<td>ended</td>
</tr>
<tr>
<td></td>
<td>error</td>
<td>abort</td>
</tr>
<tr>
<td></td>
<td>paused</td>
<td>empty</td>
</tr>
<tr>
<td></td>
<td>muted</td>
<td>emptied</td>
</tr>
<tr>
<td></td>
<td>seeking</td>
<td>waiting</td>
</tr>
<tr>
<td></td>
<td>volume</td>
<td>loadedmetadata</td>
</tr>
<tr>
<td></td>
<td>height</td>
<td></td>
</tr>
<tr>
<td></td>
<td>width</td>
<td></td>
</tr>
</tbody></table>
<h3 id="HTML5-音频"><a href="#HTML5-音频" class="headerlink" title="HTML5 音频"></a>HTML5 音频</h3><p>HTML5 规定了在网页上嵌入音频元素的标准，即使用 <code>&lt;audio&gt;</code> 元素</p>
<h4 id="lt-audio-gt-标签的属性"><a href="#lt-audio-gt-标签的属性" class="headerlink" title="&lt;audio&gt; 标签的属性"></a><code>&lt;audio&gt;</code> 标签的属性</h4><table>
<thead>
<tr>
<th>属性</th>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>autoplay</td>
<td>autoplay</td>
<td>如果出现该属性，则音频在就绪后马上播放</td>
</tr>
<tr>
<td>controls</td>
<td>controls</td>
<td>如果出现该属性，则向用户显示控件，比如播放按钮</td>
</tr>
<tr>
<td>loop</td>
<td>loop</td>
<td>如果出现该属性，则当媒介文件完成播放后再次开始播放</td>
</tr>
<tr>
<td>preload</td>
<td>preload</td>
<td>如果出现该属性，则音频在页面加载时进行加载，并预备播放,如果使用 “autoplay”，则忽略该属性。</td>
</tr>
<tr>
<td>src</td>
<td>url</td>
<td>要播放的音频的 URL</td>
</tr>
</tbody></table>
<h3 id="HTML-5-Web-存储"><a href="#HTML-5-Web-存储" class="headerlink" title="HTML 5 Web 存储"></a>HTML 5 Web 存储</h3><h4 id="在客户端存储数据"><a href="#在客户端存储数据" class="headerlink" title="在客户端存储数据"></a>在客户端存储数据</h4><div class="note info">
            <p>HTML5 提供了两种在客户端存储数据的新方法：</p><ul><li>localStorage: 没有时间限制的数据存储</li><li>sessionStorage: 针对一个session的数据存储</li></ul>
          </div>
<p><strong>HTML5 使用 JavaScript 来存储和访问数据。</strong><br>之前，这些都是由 cookie 完成的。但是 cookie 不适合大量数据的存储，因为它们由每个对服务器的请求来传递，这使得 cookie 速度很慢而且效率也不高。</p>
<p>在 HTML5 中，数据不是由每个服务器请求传递的，而是只有在请求时使用数据。它使在不影响网站性能的情况下存储大量数据成为可能。对于不同的网站，数据存储于不同的区域，并且一个网站只能访问其自身的数据。</p>
<h4 id="localStorage-方法"><a href="#localStorage-方法" class="headerlink" title="localStorage 方法"></a>localStorage 方法</h4><p><code>localStorage</code> 方法存储的数据没有时间限制。第二天、第二周或下一年之后，数据依然可用。<br>如何创建和访问 localStorage：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"result"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript"><span class="comment">// Check browser support</span></span></span><br><span class="line"><span class="actionscript"><span class="keyword">if</span> (<span class="keyword">typeof</span>(Storage) !== <span class="string">"undefined"</span>) &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// Store</span></span></span><br><span class="line"><span class="actionscript">    localStorage.setItem(<span class="string">"lastname"</span>, <span class="string">"Gates"</span>);</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// Retrieve</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">"result"</span>).innerHTML = localStorage.getItem(<span class="string">"lastname"</span>);</span></span><br><span class="line"><span class="actionscript">&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">"result"</span>).innerHTML = <span class="string">"抱歉！您的浏览器不支持 Web Storage ..."</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>下面的例子对用户访问页面的次数进行计数：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line">if (localStorage.pagecount) &#123;</span><br><span class="line"><span class="javascript">  localStorage.pagecount=<span class="built_in">Number</span>(localStorage.pagecount) +<span class="number">1</span>;</span></span><br><span class="line"><span class="actionscript">&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line">  localStorage.pagecount=1;</span><br><span class="line">&#125;</span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(<span class="string">"Visits "</span>+ localStorage.pagecount + <span class="string">" time(s)."</span>);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="sessionStorage-方法"><a href="#sessionStorage-方法" class="headerlink" title="sessionStorage 方法"></a>sessionStorage 方法</h4><p><code>sessionStorage</code> 方法针对一个 <code>session</code> 进行数据存储。当用户关闭浏览器窗口后，数据会被删除。<br>如何创建并访问一个 sessionStorage：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript">  sessionStorage.lastname=<span class="string">"Smith"</span>;</span></span><br><span class="line"><span class="javascript">  <span class="built_in">document</span>.write(sessionStorage.lastname);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>下面的例子对用户在当前 session 中访问页面的次数进行计数：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line">if (sessionStorage.pagecount) &#123;</span><br><span class="line"><span class="javascript">  sessionStorage.pagecount=<span class="built_in">Number</span>(sessionStorage.pagecount) +<span class="number">1</span>;</span></span><br><span class="line"><span class="actionscript">&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line">  sessionStorage.pagecount=1;</span><br><span class="line">&#125;</span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(<span class="string">"Visits "</span>+sessionStorage.pagecount+<span class="string">" time(s) this session."</span>);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="HTML-5-应用程序缓存"><a href="#HTML-5-应用程序缓存" class="headerlink" title="HTML 5 应用程序缓存"></a>HTML 5 应用程序缓存</h3><p><strong>使用 HTML5，通过创建 cache manifest 文件，可以轻松地创建 web 应用的离线版本</strong></p>
<div class="note info">
            <p>HTML5 引入了应用程序缓存，这意味着 web 应用可进行缓存，并可在没有因特网连接时进行访问。应用程序缓存为应用带来三个优势：</p><ul><li>离线浏览 - 用户可在应用离线时使用它们</li><li>速度 - 已缓存资源加载得更快</li><li>减少服务器负载 - 浏览器将只从服务器下载更新过或更改过的资源。</li></ul>
          </div>

<p>下面的例子展示了带有 cache manifest 的 HTML 文档（供离线浏览）：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">manifest</span>=<span class="string">"demo.appcache"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    The content of the document......</span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Cache-Manifest-基础"><a href="#Cache-Manifest-基础" class="headerlink" title="Cache Manifest 基础"></a>Cache Manifest 基础</h4><p>如需启用应用程序缓存，请在文档的 <code>&lt;html&gt;</code> 标签中包含 <code>manifest</code> 属性：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">manifest</span>=<span class="string">"demo.appcache"</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>每个指定了 manifest 的页面在用户对其访问时都会被缓存。如果未指定 manifest 属性，则页面不会被缓存（除非在 manifest 文件中直接指定了该页面）。</p>
<p>manifest 文件的建议的文件扩展名是：<code>&quot;.appcache&quot;</code>。</p>
<p><strong>请注意，manifest 文件需要配置正确的 MIME-type，即 “text/cache-manifest”。必须在 web 服务器上进行配置。</strong></p>
<h4 id="Manifest-文件"><a href="#Manifest-文件" class="headerlink" title="Manifest 文件"></a>Manifest 文件</h4><p>manifest 文件是简单的文本文件，它告知浏览器被缓存的内容（以及不缓存的内容）。</p>
<div class="note info">
            <p>manifest 文件可分为三个部分：</p><ul><li>CACHE MANIFEST - 在此标题下列出的文件将在首次下载后进行缓存</li><li>NETWORK - 在此标题下列出的文件需要与服务器的连接，且不会被缓存</li><li>FALLBACK - 在此标题下列出的文件规定当页面无法访问时的回退页面（比如 404 页面）</li></ul>
          </div>
<h5 id="CACHE-MANIFEST"><a href="#CACHE-MANIFEST" class="headerlink" title="CACHE MANIFEST"></a>CACHE MANIFEST</h5><p><strong>第一行，CACHE MANIFEST，是必需的：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CACHE MANIFEST</span><br><span class="line">/theme.css</span><br><span class="line">/logo.gif</span><br><span class="line">/main.js</span><br></pre></td></tr></table></figure>
<h5 id="NETWORK"><a href="#NETWORK" class="headerlink" title="NETWORK"></a>NETWORK</h5><p><strong>下面的 NETWORK 小节规定文件 “login.asp” 永远不会被缓存，且离线时是不可用的：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NETWORK:</span><br><span class="line">login.asp</span><br></pre></td></tr></table></figure>

<p><strong>可以使用星号来指示所有其他资源/文件都需要因特网连接：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NETWORK:</span><br><span class="line">*</span><br></pre></td></tr></table></figure>
<h5 id="FALLBACK"><a href="#FALLBACK" class="headerlink" title="FALLBACK"></a>FALLBACK</h5><p><strong>下面的 FALLBACK 小节规定如果无法建立因特网连接，则用 “offline.html” 替代 /html5/ 目录中的所有文件：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FALLBACK:</span><br><span class="line">/html5/ <span class="regexp">/404.html</span></span><br></pre></td></tr></table></figure>

<h4 id="更新缓存"><a href="#更新缓存" class="headerlink" title="更新缓存"></a>更新缓存</h4><div class="note info">
            <p>一旦应用被缓存，它就会保持缓存直到发生下列情况：</p><ul><li>用户清空浏览器缓存</li><li>manifest 文件被修改（参阅下面的提示）</li><li>由程序来更新应用缓存</li></ul>
          </div>

<h4 id="实例-完整的-Manifest-文件"><a href="#实例-完整的-Manifest-文件" class="headerlink" title="实例 - 完整的 Manifest 文件"></a>实例 - 完整的 Manifest 文件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CACHE MANIFEST</span><br><span class="line"># 2012-02-21 v1.0.0</span><br><span class="line">/theme.css</span><br><span class="line">/logo.gif</span><br><span class="line">/main.js</span><br><span class="line"></span><br><span class="line">NETWORK:</span><br><span class="line">login.asp</span><br><span class="line"></span><br><span class="line">FALLBACK:</span><br><span class="line">/html5/ <span class="regexp">/404.html</span></span><br></pre></td></tr></table></figure>

<h3 id="HTML-5-Web-Workers"><a href="#HTML-5-Web-Workers" class="headerlink" title="HTML 5 Web Workers"></a>HTML 5 Web Workers</h3><p>web worker 是运行在后台的 JavaScript，独立于其他脚本，不会影响页面的性能。您可以继续做任何愿意做的事情：点击、选取内容等等，而此时 web worker 在后台运行。</p>
<h4 id="HTML5-Web-Workers-实例"><a href="#HTML5-Web-Workers-实例" class="headerlink" title="HTML5 Web Workers 实例"></a>HTML5 Web Workers 实例</h4><p>下面的例子创建了一个简单的 web worker，在后台计数：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>计数: <span class="tag">&lt;<span class="name">output</span> <span class="attr">id</span>=<span class="string">"result"</span>&gt;</span><span class="tag">&lt;/<span class="name">output</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"startWorker()"</span>&gt;</span>开始 Worker<span class="tag">&lt;/<span class="name">button</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"stopWorker()"</span>&gt;</span>停止 Worker<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> w;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript"><span class="function"><span class="keyword">function</span> <span class="title">startWorker</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">if</span>(<span class="keyword">typeof</span>(Worker)!==<span class="string">"undefined"</span>) &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">if</span>(<span class="keyword">typeof</span>(w)==<span class="string">"undefined"</span>) &#123;</span></span><br><span class="line"><span class="actionscript">      w=<span class="keyword">new</span> Worker(<span class="string">"/example/html5/demo_workers.js"</span>);</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    w.onmessage = <span class="function"><span class="keyword">function</span> <span class="params">(event)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">document</span>.getElementById(<span class="string">"result"</span>).innerHTML=event.data;</span></span><br><span class="line">    &#125;;</span><br><span class="line"><span class="actionscript">  &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">"result"</span>).innerHTML=<span class="string">"Sorry, your browser does not support Web Workers..."</span>;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript"><span class="function"><span class="keyword">function</span> <span class="title">stopWorker</span><span class="params">()</span> </span>&#123; </span></span><br><span class="line">  w.terminate();</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="检测-Web-Worker-支持"><a href="#检测-Web-Worker-支持" class="headerlink" title="检测 Web Worker 支持"></a>检测 Web Worker 支持</h4><p>在创建 web worker 之前，请检测用户的浏览器是否支持它：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">typeof</span>(Worker)!==<span class="string">"undefined"</span>) &#123;</span><br><span class="line">  <span class="comment">// Yes! Web worker support!</span></span><br><span class="line">  <span class="comment">// Some code.....</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// Sorry! No Web Worker support..</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="创建-web-worker-文件"><a href="#创建-web-worker-文件" class="headerlink" title="创建 web worker 文件"></a>创建 web worker 文件</h4><p>现在，让我们在一个外部 JavaScript 中创建我们的 web worker。在这里，我们创建了计数脚本。该脚本存储于 “demo_workers.js” 文件中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">timedCount</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">i=i+<span class="number">1</span>;</span><br><span class="line">postMessage(i);</span><br><span class="line">setTimeout(<span class="string">"timedCount()"</span>,<span class="number">500</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">timedCount();</span><br></pre></td></tr></table></figure>
<p><strong>以上代码中重要的部分是 postMessage() 方法 - 它用于向 HTML 页面传回一段消息。</strong></p>
<p><strong>注释：web worker 通常不用于如此简单的脚本，而是用于更耗费 CPU 资源的任务。</strong></p>
<h4 id="创建-Web-Worker-对象"><a href="#创建-Web-Worker-对象" class="headerlink" title="创建 Web Worker 对象"></a>创建 Web Worker 对象</h4><p>我们已经有了 web worker 文件，现在我们需要从 HTML 页面调用它。</p>
<p>下面的代码检测是否存在 worker，如果不存在，- 它会创建一个新的 web worker 对象，然后运行 “demo_workers.js” 中的代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">typeof</span>(w)==<span class="string">"undefined"</span>) &#123;</span><br><span class="line">  w=<span class="keyword">new</span> Worker(<span class="string">"demo_workers.js"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后我们就可以从 web worker 发生和接收消息了。</p>
<p>向 web worker 添加一个 “onmessage” 事件监听器：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">w.onmessage=<span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">"result"</span>).innerHTML=event.data;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>当 web worker 传递消息时，会执行事件监听器中的代码。event.data 中存有来自 event.data 的数据。</p>
<h4 id="终止-Web-Worker"><a href="#终止-Web-Worker" class="headerlink" title="终止 Web Worker"></a>终止 Web Worker</h4><p>当我们创建 web worker 对象后，它会继续监听消息（即使在外部脚本完成之后）直到其被终止为止。</p>
<p>如需终止 web worker，并释放浏览器/计算机资源，请使用 <code>terminate()</code> 方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">w.terminate();</span><br></pre></td></tr></table></figure>
<h4 id="Web-Workers-和-DOM"><a href="#Web-Workers-和-DOM" class="headerlink" title="Web Workers 和 DOM"></a>Web Workers 和 DOM</h4><div class="note info">
            <p>由于 web worker 位于外部文件中，它们无法访问下例 JavaScript 对象：</p><ul><li>window 对象</li><li>document 对象</li><li>parent 对象</li></ul>
          </div>

<h3 id="HTML-5-服务器发送事件"><a href="#HTML-5-服务器发送事件" class="headerlink" title="HTML 5 服务器发送事件"></a>HTML 5 服务器发送事件</h3><p><strong>HTML5 服务器发送事件（server-sent event）允许网页获得来自服务器的更新。</strong></p>
<h3 id="Server-Sent-事件-单向消息传递"><a href="#Server-Sent-事件-单向消息传递" class="headerlink" title="Server-Sent 事件 - 单向消息传递"></a>Server-Sent 事件 - 单向消息传递</h3><p>Server-Sent事件指的是网页自动获取来自服务器的更新。</p>
<h3 id="接收-Server-Sent-事件通知"><a href="#接收-Server-Sent-事件通知" class="headerlink" title="接收 Server-Sent 事件通知"></a>接收 Server-Sent 事件通知</h3><p>EventSource 对象用于接收服务器发送事件通知：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> source=<span class="keyword">new</span> EventSource(<span class="string">"demo_sse.php"</span>);</span><br><span class="line">source.onmessage=<span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">"result"</span>).innerHTML+=event.data + <span class="string">"&lt;br /&gt;"</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<div class="note info">
            <p>例子解释：</p><ul><li>创建一个新的 EventSource 对象，然后规定发送更新的页面的 URL（本例中是 “demo_sse.php”）</li><li>每接收到一次更新，就会发生 onmessage 事件</li><li>当 onmessage 事件发生时，把已接收的数据推入 id 为 “result” 的元素中</li></ul>
          </div>

<h3 id="HTML5表单"><a href="#HTML5表单" class="headerlink" title="HTML5表单"></a>HTML5表单</h3><p><a href="https://www.w3school.com.cn/html5/html_5_form_input_types.asp" target="_blank" rel="noopener">https://www.w3school.com.cn/html5/html_5_form_input_types.asp</a></p>
<h2 id="CSS3"><a href="#CSS3" class="headerlink" title="CSS3"></a>CSS3</h2><p><a href="https://www.w3school.com.cn/css3/index.asp" target="_blank" rel="noopener">https://www.w3school.com.cn/css3/index.asp</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ningning0908.github.io/blog/2020/07/09/%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E9%9A%BE%E7%82%B9/%E5%89%A9%E4%BD%99%E6%97%B6%E9%97%B4%E6%AE%B5%E9%A1%B5%E9%9D%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Ning Ning">
      <meta itemprop="description" content="光、温暖、温柔">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2020/07/09/%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E9%9A%BE%E7%82%B9/%E5%89%A9%E4%BD%99%E6%97%B6%E9%97%B4%E6%AE%B5%E9%A1%B5%E9%9D%A2/" class="post-title-link" itemprop="url">剩余时间段页面</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-07-09 17:06:20" itemprop="dateCreated datePublished" datetime="2020-07-09T17:06:20+08:00">2020-07-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-10 21:30:56" itemprop="dateModified" datetime="2020-07-10T21:30:56+08:00">2020-07-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E9%9A%BE%E7%82%B9/" itemprop="url" rel="index"><span itemprop="name">项目中的难点</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>js 24小时制 给定多个时间段 计算剩下的时间段</strong><br>废话不多说，直接上图，为达到图中的功能，最后一个时间段是由其他几个时间段计算出来的，下图中的平时段是自动计算得到的。<br><img src="https://ningning-1259809020.cos.ap-chengdu.myqcloud.com/%E9%A1%B9%E7%9B%AE%E9%9A%BE%E7%82%B9/1594285891%281%29.png" alt="自定义输入时段个数及每个时段的输入时间，计算出最后一个时段的剩余时间段"><br>代码如下，代码很简单，就是为了满足条件操作时间的时候，逻辑上很恶心，vue代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"peakValleySetting"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"padding: 10px 20px"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 最后一个输入时段之前的时段可以进行自定义 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">"(item,i) in sourceFirst"</span> <span class="attr">:key</span>=<span class="string">"i"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"dateSetting"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; item.name &#125;&#125;: <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-time-picker</span></span></span><br><span class="line"><span class="tag">              <span class="attr">v-for</span>=<span class="string">"(res, m) of item.items"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">:key</span>=<span class="string">"m"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">v-model</span>=<span class="string">"item.items[m]"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">is-range</span></span></span><br><span class="line"><span class="tag">              <span class="attr">format</span>=<span class="string">"HH:mm"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">range-separator</span>=<span class="string">"-"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">start-placeholder</span>=<span class="string">"开始时间"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">end-placeholder</span>=<span class="string">"结束时间"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">placeholder</span>=<span class="string">"请选择时间范围"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">size</span>=<span class="string">"mini"</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">              <span class="attr">v-if</span>=<span class="string">"item.items.length &gt;= 1"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">type</span>=<span class="string">"danger"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">icon</span>=<span class="string">"el-icon-delete"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">circle</span></span></span><br><span class="line"><span class="tag">              <span class="attr">size</span>=<span class="string">"mini"</span></span></span><br><span class="line"><span class="tag">              @<span class="attr">click</span>=<span class="string">"onDelete(item, sourceFirst)"</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">              <span class="attr">type</span>=<span class="string">"success"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">icon</span>=<span class="string">"el-icon-circle-plus"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">circle</span></span></span><br><span class="line"><span class="tag">              <span class="attr">size</span>=<span class="string">"mini"</span></span></span><br><span class="line"><span class="tag">              @<span class="attr">click</span>=<span class="string">"onAdd(item.name, sourceFirst)"</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"dateSetting"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; sourceLast.name &#125;&#125;: <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-time-picker</span></span></span><br><span class="line"><span class="tag">            <span class="attr">v-for</span>=<span class="string">"(res, m) of sourceLast.items"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:key</span>=<span class="string">"m"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">v-model</span>=<span class="string">"sourceLast.items[m]"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">is-range</span></span></span><br><span class="line"><span class="tag">            <span class="attr">format</span>=<span class="string">"HH:mm"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">value-format</span>=<span class="string">"HH:mm"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">range-separator</span>=<span class="string">"-"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">size</span>=<span class="string">"mini"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">start-placeholder</span>=<span class="string">"开始时间"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">end-placeholder</span>=<span class="string">"结束时间"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">placeholder</span>=<span class="string">"选择时间范围"</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">"success"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">icon</span>=<span class="string">"el-icon-circle-plus"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">circle</span></span></span><br><span class="line"><span class="tag">            <span class="attr">size</span>=<span class="string">"mini"</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">click</span>=<span class="string">"lastAdd(sourceLast)"</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  data() &#123;</span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">      date: <span class="string">''</span>,</span></span><br><span class="line">      sourceFirst: [</span><br><span class="line">        &#123;</span><br><span class="line"><span class="actionscript">          name: <span class="string">'峰时段'</span>,</span></span><br><span class="line">          items: [],</span><br><span class="line"><span class="actionscript">          radio: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">          change: <span class="string">''</span></span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line"><span class="actionscript">          name: <span class="string">'谷时段'</span>,</span></span><br><span class="line">          items: [],</span><br><span class="line"><span class="actionscript">          radio: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">          change: <span class="string">''</span></span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line"><span class="actionscript">          name: <span class="string">'缓冲时段'</span>,</span></span><br><span class="line">          items: [],</span><br><span class="line"><span class="actionscript">          radio: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">          change: <span class="string">''</span></span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      sourceLast: &#123;</span><br><span class="line"><span class="actionscript">        name: <span class="string">'平时段'</span>,</span></span><br><span class="line">        items: [],</span><br><span class="line"><span class="actionscript">        radio: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">        change: <span class="string">''</span></span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    onAdd(name, source) &#123;</span><br><span class="line"><span class="javascript">      source.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span></span><br><span class="line">        if (item.name == name) &#123;</span><br><span class="line"><span class="actionscript">          item.items.push(<span class="string">' '</span>)</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    onDelete(time, source) &#123;</span><br><span class="line"><span class="javascript">      source.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span></span><br><span class="line">        if (item.name == time.name &amp;&amp; time.items.length &gt;= 1) &#123;</span><br><span class="line">          item.items.pop()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="actionscript">    <span class="comment">// 获得输入时间段数组</span></span></span><br><span class="line">    getArr() &#123;</span><br><span class="line"><span class="actionscript">      <span class="keyword">var</span> arr = []</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.sourceFirst.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span></span><br><span class="line">        if (item.name) &#123;</span><br><span class="line"><span class="javascript">          item.items.map(<span class="function"><span class="params">m</span> =&gt;</span> &#123;</span></span><br><span class="line">            arr.push(m)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> arr</span></span><br><span class="line">    &#125;,</span><br><span class="line"><span class="actionscript">    <span class="comment">// 显示按钮</span></span></span><br><span class="line">    lastAdd(last) &#123;</span><br><span class="line"><span class="actionscript">      <span class="comment">// 获得时间段数组</span></span></span><br><span class="line"><span class="actionscript">      <span class="keyword">var</span> arr = <span class="keyword">this</span>.getArr()</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">var</span> newArr = []</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 时间格式化为HH:mm形式</span></span></span><br><span class="line"><span class="javascript">      arr.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">if</span> (item != <span class="literal">undefined</span>) &#123;</span></span><br><span class="line"><span class="actionscript">          newArr.push([(<span class="string">'0'</span> + item[<span class="number">0</span>].getHours().toString()).slice(<span class="number">-2</span>) + <span class="string">':'</span> + (<span class="string">'0'</span> + item[<span class="number">0</span>].getMinutes().toString()).slice(<span class="number">-2</span>),</span></span><br><span class="line"><span class="actionscript">            (<span class="string">'0'</span> + item[<span class="number">1</span>].getHours().toString()).slice(<span class="number">-2</span>) + <span class="string">':'</span> + (<span class="string">'0'</span> + item[<span class="number">1</span>].getMinutes().toString()).slice(<span class="number">-2</span>)])</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line"><span class="actionscript">      <span class="keyword">var</span> result = <span class="keyword">this</span>.time(newArr)</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(result)</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.sourceLast.items = result</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="actionscript">    <span class="comment">// time 计算方法</span></span></span><br><span class="line">    time(arr) &#123;</span><br><span class="line"><span class="actionscript">      <span class="keyword">const</span> newArr = <span class="keyword">this</span>.formatTime(arr)</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">const</span> sortArr = <span class="keyword">this</span>.timeSort(newArr) <span class="comment">// 时间段进行排序</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(sortArr)</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">const</span> aaa = <span class="string">'00:00'</span></span></span><br><span class="line"><span class="actionscript">      <span class="keyword">const</span> bbb = <span class="string">'23:59'</span></span></span><br><span class="line"><span class="actionscript">      <span class="keyword">const</span> resArr = []</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 开始比较</span></span></span><br><span class="line"><span class="actionscript">      <span class="keyword">if</span> (sortArr[<span class="number">0</span>] != <span class="literal">undefined</span> &amp;&amp; aaa &lt; sortArr[<span class="number">0</span>][<span class="number">0</span>]) &#123;</span></span><br><span class="line">        resArr.push([aaa, sortArr[0][0]])</span><br><span class="line">      &#125;</span><br><span class="line"><span class="javascript">      sortArr.forEach(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span></span><br><span class="line">        if (index === sortArr.length - 1) &#123;</span><br><span class="line"><span class="actionscript">          <span class="keyword">return</span></span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> startTime = item[<span class="number">1</span>]</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> endTime = sortArr[index + <span class="number">1</span>][<span class="number">0</span>]</span></span><br><span class="line">        if (startTime &lt; endTime) &#123;</span><br><span class="line">          resArr.push([startTime, endTime])</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line"><span class="actionscript">      <span class="keyword">if</span> (sortArr[sortArr.length - <span class="number">1</span>] != <span class="literal">undefined</span> &amp;&amp; bbb &gt; sortArr[sortArr.length - <span class="number">1</span>][<span class="number">1</span>]) &#123;</span></span><br><span class="line">        resArr.push([sortArr[sortArr.length - 1][1], bbb])</span><br><span class="line">      &#125;</span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> resArr</span></span><br><span class="line">    &#125;,</span><br><span class="line"><span class="actionscript">    <span class="comment">// 如果存在 ['22:00','00:10']  这样格式的 转化为['22:00','23:59'] 和['00:00','00:10']</span></span></span><br><span class="line">    formatTime(arr) &#123;</span><br><span class="line"><span class="actionscript">      <span class="keyword">const</span> newArr = [...arr]</span></span><br><span class="line"><span class="javascript">      arr.forEach(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (<span class="built_in">Date</span>.parse(<span class="string">`2000/01/01 <span class="subst">$&#123;item[<span class="number">0</span>]&#125;</span>:00`</span>) &gt; <span class="built_in">Date</span>.parse(<span class="string">`2000/01/01 <span class="subst">$&#123;item[<span class="number">1</span>]&#125;</span>:00`</span>)) &#123;</span></span><br><span class="line">          newArr.splice(index, 1)</span><br><span class="line"><span class="actionscript">          newArr.push([item[<span class="number">0</span>], <span class="string">'23:59'</span>])</span></span><br><span class="line"><span class="actionscript">          newArr.push([<span class="string">'00:00'</span>, item[<span class="number">1</span>]])</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> newArr</span></span><br><span class="line">    &#125;,</span><br><span class="line"><span class="actionscript">    <span class="comment">// 时间  排序</span></span></span><br><span class="line">    timeSort(arr) &#123;</span><br><span class="line"><span class="actionscript">      <span class="keyword">var</span> arrSort = arr.sort(<span class="function"><span class="keyword">function</span><span class="params">(a, b)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="built_in">Date</span>.parse(<span class="string">`2000/01/01 <span class="subst">$&#123;a[<span class="number">0</span>]&#125;</span>:00`</span>) - <span class="built_in">Date</span>.parse(<span class="string">`2000/01/01 <span class="subst">$&#123;b[<span class="number">0</span>]&#125;</span>:00`</span>)</span></span><br><span class="line">      &#125;)</span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> arrSort</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-class">.peakValleySetting</span> &#123;</span></span><br><span class="line">  position: relative;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 50%;</span><br><span class="line"><span class="css">  <span class="comment">/* padding: 10px; */</span></span></span><br><span class="line">  background-color: white;</span><br><span class="line">  border: 2px solid rgb(141, 137, 79);</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.dateSetting</span> &#123;</span></span><br><span class="line">  margin-bottom: 20px;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.el-date-editor</span><span class="selector-class">.el-input</span>,</span></span><br><span class="line"><span class="css"><span class="selector-class">.el-date-editor</span><span class="selector-class">.el-input__inner</span> &#123;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">width</span>: 12<span class="selector-class">.105vw</span>;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ningning0908.github.io/blog/2020/07/06/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/DOM%E6%89%A9%E5%B1%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Ning Ning">
      <meta itemprop="description" content="光、温暖、温柔">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2020/07/06/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/DOM%E6%89%A9%E5%B1%95/" class="post-title-link" itemprop="url">第十一章 DOM扩展</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-07-06 21:14:56" itemprop="dateCreated datePublished" datetime="2020-07-06T21:14:56+08:00">2020-07-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-20 11:05:43" itemprop="dateModified" datetime="2020-07-20T11:05:43+08:00">2020-07-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index"><span itemprop="name">JavaScript高级程序设计</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>关于DOM全面的干货博客：<a href="https://www.cnblogs.com/sugartang/p/11342453.html" target="_blank" rel="noopener">https://www.cnblogs.com/sugartang/p/11342453.html</a></strong></p>
<h2 id="选择符API"><a href="#选择符API" class="headerlink" title="选择符API"></a>选择符API</h2><p>Selectors API是由W3C发起指定的一个标准，致力于让浏览器原生支持CSS查询。Selectors API Level1级的核心是两个方法：<code>querySelector()</code>和<code>querySelectorAll()</code>。在兼容的浏览器中，可以通过Document及Element类型的实例调用它们。目前已完全支持Selectors API Level1级的浏览器有IE8+、Firefox3.5+、Safari3.1+、Chrome和Opera10+。</p>
<h3 id="querySelector-方法"><a href="#querySelector-方法" class="headerlink" title="querySelector( )方法"></a>querySelector( )方法</h3><p>该方法接受单个CSS选择符作为参数，返回与该模式匹配的第一个元素，如果没有找到匹配的元素则返回<code>null</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 取得body元素</span></span><br><span class="line"><span class="keyword">var</span> body = <span class="built_in">document</span>.querySelector(<span class="string">'body'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 取得ID为"myDiv"元素</span></span><br><span class="line"><span class="keyword">var</span> myDiv = <span class="built_in">document</span>.querySelector(<span class="string">'#myDiv'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 取得类为"selected"的第一个元素</span></span><br><span class="line"><span class="keyword">var</span> selected = <span class="built_in">document</span>.querySelector(<span class="string">'.selected'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 取得类为"button"的第一个图像元素</span></span><br><span class="line"><span class="keyword">var</span> img = <span class="built_in">document</span>.querySelector(<span class="string">'img.button'</span>)</span><br></pre></td></tr></table></figure>
<p>通过Document类型调用<code>querySelector()</code>方法时，会在文档元素的范围内查找匹配的元素。而通过Element类型调用<code>querySelector()</code>方法时，只会在该元素后代元素的范围内查找匹配的元素。CSS选择符可以简单也可以复杂，视情况而定。如果传入了不被支持的选择符，<code>querySelector()</code>方法会抛出错误。</p>
<h3 id="querySelectorAll-方法"><a href="#querySelectorAll-方法" class="headerlink" title="querySelectorAll( )方法"></a>querySelectorAll( )方法</h3><p><code>querySelectorAll()</code>方法接受的参数与<code>querySelector()</code>方法一样，都是一个CSS选择符，但返回的是所有匹配元素而不仅仅是一个元素。这个方法返回的是一个带有<code>NodeList</code>所有属性和方法的一个快照，而非不断对文档进行搜索的动态查询。这样实现可以避免使用<code>NodeList</code>对象通常会引起的大多数性能问题。</p>
<p><code>querySelectorAll()</code>的用法类似于<code>querySelector()</code>，就不介绍了。</p>
<h3 id="matchesSelector-方法"><a href="#matchesSelector-方法" class="headerlink" title="matchesSelector( )方法"></a>matchesSelector( )方法</h3><p>Selectors API Level2级规范为Element类型新增了一个方法<code>matchesSelector()</code>。这个方法接收一个参数，即CSS选择符，如果调用元素与该选择符匹配，返回<code>true</code>；否则返回<code>false</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">document</span>.body.matchesSelector(<span class="string">'body.page1'</span>)) &#123;</span><br><span class="line">    <span class="comment">// true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在取得某个元素引用的情况下，使用这个方法能够方便地检测它是否会被<code>querySelector()</code>或<code>querySelectorAll()</code>方法返回。</p>
<p>截止2011年年中，还没有浏览器支持<code>matchesSelector()</code>方法，不过，也有一些实验性的实现。IE9+通过<code>msMatchesSelector()</code>支持该方法，Firefox3.6+通过<code>mozMatchesSelector()</code>支持该方法，Chrome通过`webkitMatchesSelector()支持该方法。因此若是想使用该方法，最好是编写一个包装函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!Element.prototype.matchesSelector) &#123;</span><br><span class="line">    Element.prototype.matchesSelector = </span><br><span class="line">        Element.prototype.mozMatchesSelector ||</span><br><span class="line">        Element.prototype.msMatchesSelector || </span><br><span class="line">        Element.prototype.oMatchesSelector || </span><br><span class="line">        Element.prototype.webkitMatchesSelector ||</span><br><span class="line">        <span class="function"><span class="keyword">function</span> (<span class="params">s</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> matches = (<span class="keyword">this</span>.document || <span class="keyword">this</span>.ownerDocument).querySelectorAll(s),</span><br><span class="line">                i = matches.length</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (--i &gt;= <span class="number">0</span> &amp;&amp; matches.item(i) !== <span class="keyword">this</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> i &gt; <span class="number">-1</span>     </span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="元素遍历"><a href="#元素遍历" class="headerlink" title="元素遍历"></a>元素遍历</h2><p>对于元素间的空格，IE9及之前的版本不会返回文本节点，而其他所有浏览器都会返回文本节点。这样，就导致了在使用<code>childNodes</code>和<code>firstChild</code>等属性时的行为不一致，为了弥补这一差异，而同时又要保持DOM规范不变，Element Traversal规范新定义了一组属性：</p>
<div class="note info">
            <ul><li><strong>childElementCount</strong>: 返回子元素（不包括文本节点和注释）的个数；</li><li><strong>firstElementChild</strong>: 指向第一个子元素；</li><li><strong>lastElementChild</strong>: 指向最后一个子元素；</li><li><strong>previousElementSibling</strong>: 指向前一个同辈元素；</li><li><strong>nextElementSibling</strong>: 指向后一个同辈元素</li></ul>
          </div>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> child = element.firstElementChild;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (child !== element.lastElementChild) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(child);</span><br><span class="line">    child = child.nextElementSibling;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="HTML5"><a href="#HTML5" class="headerlink" title="HTML5"></a>HTML5</h2><h3 id="与类相关的扩充"><a href="#与类相关的扩充" class="headerlink" title="与类相关的扩充"></a>与类相关的扩充</h3><div class="note info">
            <ul><li><strong>getElementsByClassName()</strong>: 该方法接收一个参数，即一个包含一个或多个类名的字符串，返回带有指定类的所有元素的<code>HTMLCollection</code>，传入多个类名时，类名的先后顺序不重要，该方法可以通过<code>document</code>对象及所有HTML元素调用；</li><li><strong>classList</strong>: 该属性是一个只读属性，保存着一个元素的类属性的实时<code>DOMTokenList</code>集合。<code>DOMTokenList</code>有一个表示自己包含多少元素的<code>length</code>属性，而要取得每一个元素可以使用方括号语法或<code>item()</code>方法；</li><li><strong>classList.add(value)</strong>：将给定的字符串值添加到<code>classList</code>中，如果值已经存在了，就不添加了；</li><li><strong>classList.contains(value)</strong>： 表示<code>classList</code>中是否已经存在给定的值，如果存在则返回<code>true</code>，否则返回<code>false</code>；</li><li><strong>classList.remove(value)</strong>：从<code>classList</code>中删除给定的字符串；</li><li><strong>classList.toggle(value)</strong>：如果<code>classList</code>中已经存在给定的值，删除它。如果classList中没有给定的值，添加它。</li></ul>
          </div>

<h3 id="焦点管理"><a href="#焦点管理" class="headerlink" title="焦点管理"></a>焦点管理</h3><p>HTML5添加了辅助管理DOM焦点的功能。首先就是<code>document.activeElement</code>属性，这个属性始终会引用DOM中当前获得了焦点的元素。元素获得焦点的方式有页面加载、用户输入(通常是通过按Tab键)和在代码中调用<code>focus()</code>方法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> button = <span class="built_in">document</span>.getElementById(<span class="string">'myButton'</span>)</span><br><span class="line">button.focus()</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.activeElement === button)  <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>默认情况下，文档加载期间，<code>document.activeElement</code>的值为<code>null</code>。文档刚刚加载完成时，<code>document.activeElement</code>中保存的是<code>document.body</code>元素的引用。通过检测文档是否获得了焦点，可以知道用户是不是正在与页面交互。</p>
<p>另外就是新增了<code>document.hasFocus()</code>方法，这个方法用于确定文档是否获得了焦点。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> button = <span class="built_in">document</span>.getElementById(<span class="string">'myButton'</span>)</span><br><span class="line">button.focus()</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.hasFocus())  <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h3 id="HTMLDocument的变化"><a href="#HTMLDocument的变化" class="headerlink" title="HTMLDocument的变化"></a>HTMLDocument的变化</h3><p>HTML5扩展了<code>HTMLDocument</code>，为<code>document</code>对象新增了三个属性：</p>
<div class="note info">
            <ul><li><strong>readyState</strong>：该属性有两个可能的值：<code>loading</code>和<code>complete</code>。通过该属性可以知道文档是否加载完成；</li><li><strong>compatMode</strong>：在标准模式下，<code>document.compatMode</code>的值等于<code>CSS1Compat</code>，而在混杂模式下，<code>document.compatMode</code>的值等于<code>BackCompat</code>；</li><li><strong>head</strong>：该属性保存着<code>&lt;head&gt;</code>元素的引用。</li></ul>
          </div>
<h3 id="字符集属性"><a href="#字符集属性" class="headerlink" title="字符集属性"></a>字符集属性</h3><div class="note info">
            <p>HTML5新增了两个个与文档字符集有关的属性：</p><ul><li><strong>charset</strong>：表示文档中实际使用的字符集，也可以用来指定新字符集。默认情况下，这个属性的值为<code>&quot;UTF-16&quot;</code>，但可以通过<code>&lt;meta&gt;</code>元素、响应头部或直接设置<code>charset</code>属性修改这个值；</li><li><strong>defaultCharset</strong>：表示根据默认浏览器及操作系统的设置，当前文档默认的字符集应该是什么。如果文档没有使用默认的字符集，那<code>charset</code>和<code>defaultCharset</code>属性的值可能会不一样。</li></ul>
          </div>
<h3 id="自定义数据属性"><a href="#自定义数据属性" class="headerlink" title="自定义数据属性"></a>自定义数据属性</h3><p>HTML5规定可以为元素添加非标准的属性，但要添加前缀<code>data-</code>，目的是为元素提供与渲染无关的信息，或者提供语义信息。这些属性可以任意添加、随便命名，只要以<code>data-</code>开头即可。</p>
<p>添加了自定义属性之后，可以通过元素的<code>dataset</code>属性来访问/修改自定义属性的值。<code>dataset</code>属性的值是<code>DOMStringMap</code>的一个实例，也就是一个键值对的映射。</p>
<div class="note info">
            <p>自定义数据属性转化为<code>DOMStringMap</code>的键值对时会遵循以下规则：</p><ul><li>前缀<code>data-</code>被去除（包括减号）；</li><li>对于每个在ASCII小写字母a到z前面的减号，会被去除，并且字母会转变成对应的大写字母；</li><li>其他字符（包含其他减号）都不发生变化。</li></ul>
          </div>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"myDiv"</span> <span class="attr">data-app-id</span>=<span class="string">"12345"</span> <span class="attr">data-my-name</span>=<span class="string">"Nicholas"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.getElementById(<span class="string">'myDiv'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(div.dataset.appId)</span><br><span class="line"><span class="built_in">console</span>.log(div.dataset.myName)</span><br><span class="line"></span><br><span class="line">div.dataset.appId = <span class="number">23456</span></span><br><span class="line">div.dataset.myName = <span class="string">'Michael'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 会为元素添加data-new-attr属性，其值为"new"</span></span><br><span class="line">div.dataset.newAttr = <span class="string">'new'</span></span><br></pre></td></tr></table></figure>
<h3 id="插入标记"><a href="#插入标记" class="headerlink" title="插入标记"></a>插入标记</h3><p>虽然DOM为操作节点提供了细致入微的控制手段，但在需要给文档插入大量新HTML标记的情况下，通过DOM操作仍然非常麻烦，因为不仅要创建一系列DOM节点，而且还要小心地按照正确的顺序把他们连接起来。相对而言，使用插入标记的技术，直接插入HTML字符串不仅更简单，速度也更快。</p>
<h4 id="innerHTML属性"><a href="#innerHTML属性" class="headerlink" title="innerHTML属性"></a>innerHTML属性</h4><p>在读模式下，<code>innerHTML</code>属性返回与调用元素的所有子节点（包括元素、注释和文本节点）对应的HTML标记。在写模式下，<code>innerHTML</code>会根据指定的值创建新的DOM树，然后用这个DOM树完全替换调用元素原先的所有子节点。</p>
<p>需要注意的是，为<code>innerHTML</code>设置的值与返回的值不一定相同，如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">div.innerHTML = <span class="string">"hello &amp; welcome,&lt;b&gt;\"reader\"&lt;/b&gt;"</span></span><br><span class="line"><span class="built_in">console</span>.log(div.innerHTML)  <span class="comment">// hello &amp;amp; welcome,&lt;b&gt;"reader"&lt;/b&gt;</span></span><br></pre></td></tr></table></figure>
<div class="note info">
            <p>使用innerHTML的限制：</p><ul><li>不可以使用<code>innerHTML</code>插入<code>&lt;script&gt;</code>标签；</li><li>并不是所有元素都支持<code>innerHTML</code>属性，不支持的元素有：<code>&lt;col&gt;</code>、<code>&lt;colgroup&gt;</code>、<code>&lt;frameset&gt;</code>、<code>&lt;head&gt;</code>、<code>&lt;html&gt;</code>、<code>&lt;style&gt;</code>、<code>&lt;table&gt;</code>、<code>&lt;tbody&gt;</code>、<code>&lt;thead&gt;</code>、<code>&lt;tfoot&gt;</code>和<code>&lt;tr&gt;</code>。</li></ul>
          </div>
<h4 id="outerHTML属性"><a href="#outerHTML属性" class="headerlink" title="outerHTML属性"></a>outerHTML属性</h4><p>在读模式下，<code>outerHTML</code>返回调用它的元素及所有子节点的HTML标签。在写模式下，<code>outerHTML</code>会根据指定的HTML字符串创建新的DOM子树，然后用这个DOM子树完全替换调用元素。</p>
<p>其他方面，<code>outerHTML</code>属性与<code>innerHTML</code>属性相同。</p>
<h4 id="insertAdjacentHTML-方法"><a href="#insertAdjacentHTML-方法" class="headerlink" title="insertAdjacentHTML( )方法"></a>insertAdjacentHTML( )方法</h4><div class="note info">
            <p>插入标记的最后一个新增方式是<code>insertAdjacentHTML()</code>方法。它接收两个参数：插入位置和要插入的HTML文本。第一个参数必须是下列字符串之一：</p><ul><li><strong>beforebegin</strong>：在当前元素之前插入一个紧邻的同辈元素；</li><li><strong>afterbegin</strong>：在当前元素的第一个子元素之前再插入新的子元素；</li><li><strong>beforeend</strong>：在当前元素的最后一个子元素之后再插入新的子元素；</li><li><strong>afterend</strong>：在当前元素之后插入一个紧邻的同辈元素。</li></ul>
          </div>
<h3 id="scrollIntoView-方法"><a href="#scrollIntoView-方法" class="headerlink" title="scrollIntoView( )方法"></a>scrollIntoView( )方法</h3><p>示例参考博客： <a href="https://blog.csdn.net/hyl94/article/details/77472154/" target="_blank" rel="noopener">https://blog.csdn.net/hyl94/article/details/77472154/</a><br>该方法可以在所有HTML元素上调用，通过滚动浏览器窗口或某个容器元素，调用元素就可以出现在视口中。</p>
<div class="note info">
            <p>该方法的参数比较有意思，如下所示：</p><ul><li>如果传递一个对象，该对象包含如下属性：<ul><li><strong>behavior</strong>：定义缓动动画，<code>&quot;auto&quot;</code>、<code>&quot;instant&quot;</code>或<code>&quot;smooth&quot;</code>，默认为<code>&quot;auto&quot;</code>；</li><li><strong>block</strong>：定义垂直对齐，<code>&quot;start&quot;</code>、<code>&quot;center&quot;</code>、<code>&quot;end&quot;</code>或<code>&quot;nearest&quot;</code>，默认为<code>&quot;start&quot;</code>；</li><li><strong>inline</strong>：定义水平对齐，<code>&quot;start&quot;</code>、<code>&quot;center&quot;</code>、<code>&quot;end&quot;</code>或<code>&quot;nearest&quot;</code>，默认为<code>&quot;nearest&quot;</code>。</li></ul></li><li>如果传递<code>true</code>或不传递参数，则此时相当于传递了<code>{block: &quot;start&quot;, inline: &quot;nearest&quot;}</code>；</li><li>如果传递<code>false</code>，则此时相当于传递了<code>{block: &quot;end&quot;, inline: &quot;nearest&quot;}</code>。</li></ul>
          </div>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ningning0908.github.io/blog/2020/07/04/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/DOM/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Ning Ning">
      <meta itemprop="description" content="光、温暖、温柔">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2020/07/04/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/DOM/" class="post-title-link" itemprop="url">第十章 DOM</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-07-04 11:21:51" itemprop="dateCreated datePublished" datetime="2020-07-04T11:21:51+08:00">2020-07-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-06 21:33:01" itemprop="dateModified" datetime="2020-07-06T21:33:01+08:00">2020-07-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index"><span itemprop="name">JavaScript高级程序设计</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>DOM(文档对象模型)是针对HTML和XML文档的一个API(应用程序编程接口)。DOM描绘了一个层次化的节点树，允许开发人员添加、移除和修改页面的某一部分。</p>
<h2 id="节点层次"><a href="#节点层次" class="headerlink" title="节点层次"></a>节点层次</h2><p>DOM可以将任何HTML或XML文档描绘成一个由多层节点构成的结构。节点分为几种不同的类型，每种类型分别表示文档中不同的信息及（或）标记。每个节点都拥有各自的特点、数据和方法，另外也和其他节点存在某种关系。节点之间的关系构成了层次，而所有页面标记则表现为一个以特定节点为根节点的树形结构。以下面的HTML为例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Sample Page<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>可以将这个简单的HTML文档表示为如下层次结构：<br><img src="https://ningning-1259809020.cos.ap-chengdu.myqcloud.com/DOM/10-1%E8%8A%82%E7%82%B9%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84.png" alt="attr"></p>
<p>文档节点是每个文档的根节点。在这个例子中，文档节点只有一个子节点，即<code>&lt;html&gt;</code>元素，我们称之为文档元素。<strong>文档元素是文档的最外层元素，文档中的其他所有元素都包含在文档元素中</strong>。每个文档只能有一个文档元素。在HTML页面中，文档元素始终都是<html>元素。在XML中，没有预定义的元素，因此任何元素都可能成为文档元素。</p>
<p>每一段标记都可以通过树中的一个节点来表示；HTML元素通过元素节点表示，特性（attribute）通过特性节点表示，文档类型通过文档类型节点表示，而注释则通过注释节点表示。总共有12种节点类型，这些类型有继承自一个基类型。</p>
<h3 id="Node类型"><a href="#Node类型" class="headerlink" title="Node类型"></a>Node类型</h3><p>DOM1级定义了一个Node接口，该接口将由DOM中的所有节点类型实现。这个Node接口在JavaScript中是作为Node类型实现的；除了IE之外，在其他所有浏览器中都可以访问到这个类型。JavaScript中的所有节点类型都继承自Node类型，因此所有节点类型都共享着相同的基本属性和方法。</p>
<div class="note info">
            <p>每个节点都有一个<code>nodeType</code>属性，用于表明节点的类型。节点类型有Node类型中定义的下列12个数值常量来表示，任何节点类型必居其一：</p><ul><li>Node.ELEMENT_NODE(1)；</li><li>Node.ATTRIBUTE_NODE(2)；</li><li>Node.TEXT_NODE(3)；</li><li>Node.CDATA_SECTION_NODE(4)；</li><li>Node.ENTITY_REFERENCE_NODE(5)；</li><li>Node.ENTITY_NODE(6)；</li><li>Node.PROCESSING_INSTRUCTION_NODE(7)；</li><li>Node.COMMENT_NODE(8)；</li><li>Node.DOCUMENT_NODE(9)；</li><li>Node.DOCUMENT_TYPE_NODE(10)；</li><li>Node.DOCUMENT_FRAGMENT_NODE(11)；</li><li>Node.NOTATION_NODE(12)；</li></ul>
          </div>

<p>通过比较上面这些常量，可以很容易地确定节点的类型，例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在IE中无效</span></span><br><span class="line"><span class="keyword">if</span> (someNode.nodeType === Node.ELEMENT_NODE) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Node is an element'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>为了确保跨浏览器兼容，最好还是将nodeType属性与数字值进行比较，如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 适用于所有浏览器</span></span><br><span class="line"><span class="keyword">if</span> (someNode.nodeType === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Node is an element'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>为了了解节点的具体信息，可以使用<code>nodeName</code>和<code>nodeType</code>这两个属性，这两个属性的值完全取决于节点的类型。</p>
<h4 id="节点关系属性"><a href="#节点关系属性" class="headerlink" title="节点关系属性"></a>节点关系属性</h4><div class="note info">
            <p>文档中所有的节点之间都存在这样或那样的关系，节点间的各种关系可以用传统的家族关系来描述，相当于把文档树比喻成家谱。每个节点都有如下属性，用于记录彼此之间的关系：</p><ul><li>childNodes：该属性可以看作一个保存着所有子节点的有序列表。</li><li>children：该属性可以看作一个保存着所有子元素的有序列表，它是非标准的，但是绝大多数浏览器都支持。</li><li>firstChild：指向childNodes列表的第一个节点，如果不存在，则为null。</li><li>lastChild：指向childNodes列表的最后一个节点，如果不存在，则为null。</li><li>parentNode：该属性指向文档中的父节点。</li><li>previousSibling：指向上一个同胞节点，如果不存在，则为null。</li><li>nextSibling：指向下一个同胞节点，如果不存在，则为null。</li><li>ownerDocument：指向表示整个文档的文档节点。</li></ul>
          </div>

<p>关于<code>childNodes</code>属性，该属性中保存着一个<code>NodeList</code>对象，<code>NodeList</code>对象是一种类数组对象，用于保存一组有序的节点。<strong><code>NodeList</code>对象的独特之处在于，它实际上是基于DOM结构动态执行查询的结果，因此DOM结构的变化能够自动反映在<code>NodeList</code>对象中。</strong>如果要访问<code>NodeLis</code>t对象中的元素，可以使用方括号语法或者<code>item()</code>方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> firstChild = someNode.childNodes[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">var</span> secondChild = someNode.childNodes.item(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">var</span> count = someNode.childNodes.length</span><br></pre></td></tr></table></figure>

<p>下图形象的展示了这些属性的含义：<br><img src="https://ningning-1259809020.cos.ap-chengdu.myqcloud.com/DOM/10-2%E8%8A%82%E7%82%B9%E5%85%B3%E7%B3%BB%E5%B1%9E%E6%80%A7.png" alt="attr"></p>
<h4 id="操作节点"><a href="#操作节点" class="headerlink" title="操作节点"></a>操作节点</h4><div class="note info">
            <p>因为节点的关系属性都是只读的，所以DOM提供了一些操作子节点的方法，<strong>注意：这四种方法操做的都是某个节点的子节点，也就是说，要使用这几个方法必须要先取得父节点（使用<code>parentNode</code>属性）</strong>：</p><ul><li>appendChild( )：该方法接受单个参数：要新增的节点。操作成功后返回新增的节点。该操作会将新增的节点添加到childNodes列表的末尾。添加节点后，childNodes中相关节点的关系会自动更新；</li><li>insertBefore( )：该方法接受两个参数：要插入的节点和作为参照的节点。插入节点后，被插入的节点会变成参照节点的前一个同胞节点(previousSibling)同时被方法返回。如果第二个参数是null，则会将要插入的节点添加到childNodes列表的末尾。如果省略第二个参数，会抛出错误；</li><li>replaceChild( )：该方法接受两个参数：要插入的节点和要替换的节点。操作成功后返回被替换的节点；</li><li>removeChild( )：该方法接受单个参数：要移除的节点。操作成功后返回被移除的节点。</li></ul><hr><p>注意事项：</p><ul><li>任何一个DOM节点不能同时出现在文档中的多个位置上，所以当使用<code>appendChild()</code>、<code>insertBefore()</code>或<code>replaceChild()</code>方法并且传入的第一个参数为文档树中已经存在的节点时，该节点会从原位置转移到对应的新位置；</li><li>每个节点都有一个<code>ownerDocument</code>属性，表示所属的文档。如果调用<code>appendChild()</code>时传入的节点属于不同的文档，则会抛出错误。</li></ul>
          </div>

<h4 id="其他方法"><a href="#其他方法" class="headerlink" title="其他方法"></a>其他方法</h4><div class="note info">
            <ul><li>cloneNode( )：用于创建调用这个方法的节点的一个完全相同的副本。该方法接受一个布尔值参数，表示是否执行深复制。在参数为true时，执行深复制，也就是复制节点及其整个子节点树；在参数为false时，执行浅复制，即只复制节点本身。复制后返回的节点副本属于文档所有，但并没有为它指定父节点。需要注意的是，该方法不会复制添加到DOM节点中的JavaScript属性，例如事件处理程序等；</li><li>normalize( )：该方法唯一的作用是处理文档树中的文本节点。由于解析器的实现或DOM操作等原因，可能会出现文本节点不包含文本，或者接连出现两个文本节点的情况。当在某个节点上调用这个方法时，就会在该节点的后代节点中查找上述两种情况。如果找到了空文本节点，则删除它；如果找到相邻的文本节点，则将它们合并为一个文本节点。</li></ul>
          </div>

<h3 id="Document类型"><a href="#Document类型" class="headerlink" title="Document类型"></a>Document类型</h3><p>JavaScript通过Document类型表示文档。在浏览器中，document对象是HTMLDocument（继承自Document类型）的一个实例，表示整个HTML页面。而且，document对象是window对象的一个属性，因此可以将其作为全局对象来访问。Document节点具有下列特征：</p>
<div class="note info">
            <ul><li>nodeType的值为9；</li><li>nodeName的值为”#document”；</li><li>nodeValue的值为null；</li><li>parentNode的值为null；</li><li>ownerDocument的值为null；</li><li>其子节点可能是一个DocumentType（最多一个）、Element（最多一个）、ProcessingInstruction或Comment。</li></ul>
          </div>

<h4 id="document对象的属性"><a href="#document对象的属性" class="headerlink" title="document对象的属性"></a>document对象的属性</h4><div class="note info">
            <ul><li>documentElement：该属性指向HTML页面中的<html>元素,用法:document.documentElement;</li><li>body：该属性指向HTML页面中的<body>元素,用法:document.body；</li><li>doctype：该属性指向&lt;!DOCTYPE&gt;标签，但是不同浏览器对该属性的支持差别很大,用法:document.doctype；</li><li>title：通过该属性可以取得当前页面的标题，也可以修改当前页面的标题并反映在浏览器的标题栏中，用法:document.title；</li><li>URL：该属性保存着页面完整的URL，用法:document.URL；</li><li>domain：该属性保存着页面的域名，用法:document.domain；</li><li>referrer：该属性保存着链接到当前页面的那个页面的URL。在没有来源页面的情况下，该属性值可能会包含空字符串,用法:document.referrer</li></ul><hr><p><strong>关于domain属性，可以将低级域改为高级域，但是不能将高级域改为低级域。</strong></p>
          </div>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.domain = <span class="string">'wrox.com'</span>        <span class="comment">// 成功</span></span><br><span class="line"><span class="built_in">document</span>.domain = <span class="string">'p2p.wrox.com'</span>    <span class="comment">// 抛出错误！</span></span><br></pre></td></tr></table></figure>

<h4 id="查找元素"><a href="#查找元素" class="headerlink" title="查找元素"></a>查找元素</h4><div class="note info">
            <ul><li><strong>document.getElementById( )</strong>：该方法接受单个参数：要取得的元素ID。如果找到相应的元素则返回该元素，如果不存在则返回null。<strong>注意，这里的ID必须与页面中元素的id特性（attribute）严格匹配，包括大小写。如果页面中多个元素的ID值相同，则该方法只返回文档中第一次出现的元素</strong>。</li><li><strong>document.getElementsByTagName( )</strong>：该方法接受单个参数：要取得元素的标签名。该方法返回的是包含零或多个元素的<code>HTMLCollection</code>对象。如果想要取得文档中的所有元素，可以向该方法传入<code>&quot;*&quot;</code>；</li><li><strong>document.getElementsByName( )</strong>：该方法是只有HTMLDocument类型才有的方法，它接受单个参数：要取得元素的<code>name</code>特性值。该方法返回的是包含零或多个元素的<code>NodeList</code>对象（书上说的是返回<code>HTMLCollection</code>对象，MDN上说返回<code>NodeList</code>对象，不同浏览器可能实现的不同吧）。</li></ul><hr><p><code>HTMLCollection</code>对象与<code>NodeList</code>对象非常相似（它们都是动态的，都是类数组对象），它们之间只有两个区别：<br><code>HTMLCollection</code>对象是元素集合，而<code>NodeList</code>对象是节点集合；<br><code>HTMLCollection</code>对象多出了一个<code>namedItem()</code>方法，该方法可以通过元素的<code>name</code>特性取得集合中对应的元素，如果多个元素的<code>name</code>特性相同，则返回第一个元素。<code>HTMLCollection</code>对象支持按名称访问项，如果向方括号中传入字符串形式的索引值，在后台会自动调用<code>namedItem()</code>方法，即<code>elements[&#39;myImg&#39;] === htmls.namedItem(&#39;myImg&#39;)</code>。</p>
          </div>

<h4 id="特殊集合"><a href="#特殊集合" class="headerlink" title="特殊集合"></a>特殊集合</h4><div class="note info">
            <p>除了属性和方法，document对象还有一些特殊的集合。这些集合都是<code>HTMLCollection</code>对象，为访问文档常用的部分提供了快捷方式，包括：</p><ul><li><strong>document.anchors</strong>：包含文档中所有带name特性的<code>&lt;a&gt;</code>元素；</li><li><strong>document.applets</strong>：包含文档中所有的<code>&lt;applet&gt;</code>元素，因为不再推荐使用<code>&lt;applet&gt;</code>元素，所以这个集合已经不建议使用了；</li><li><strong>document.forms</strong>：包含文档中所有的<code>&lt;form&gt;</code>元素，与<code>document.getElementsByTagName(&#39;form&#39;)</code>得到的结果相同；</li><li><strong>document.images</strong>：包含文档中所有的<code>&lt;img&gt;</code>元素，与<code>document.getElementsByTagName(&#39;img&#39;)</code>得到的结果相同；</li><li><strong>document.links</strong>：包含文档中所有带<code>href</code>特性的<code>&lt;a&gt;</code>元素。</li></ul>
          </div>

<h4 id="文档写入"><a href="#文档写入" class="headerlink" title="文档写入"></a>文档写入</h4><p>有一个<code>document</code>对象的功能已经存在很多年了，那就是将输出流写入到网页中的能力。这个能力体现在下列4个方法中：<code>write()</code>、<code>writeln()</code>、<code>open()</code>和<code>close()</code>。其中<code>write()</code>和<code>writeln()</code>方法都接受单个字符串参数，即要写入到输出流中的文本。<code>write()</code>会原样写入，而<code>writeln(</code>)则会在字符串的末尾添加一个换行符<code>（\n）</code>。<strong>在页面被加载的过程中，可以使用这两个方法向页面中动态地加入内容</strong>，如下面的例子所示：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>document.write() Example<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">            The current date and time is:</span><br><span class="line">            <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.write(<span class="string">'&lt;strong&gt;'</span> + (<span class="keyword">new</span> <span class="built_in">Date</span>()).toString() + <span class="string">'&lt;/strong&gt;'</span>)</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这个例子展示了在页面加载过程中输出当前日期和时间的代码。其中，日期被包含在一个<code>&lt;strong&gt;</code>元素中，就像在HTML页面中包含普通的文本一样。这样做会创建一个DOM元素，而且可以在将来访问该元素。通过<code>write()</code>和<code>writeln()</code>输出的任何HTML代码都将如此处理。<br>此外，还可以使用<code>write()</code>和<code>writeln()</code>方法动态地包含外部资源，例如JavaScript文件等。在包含JavaScript文件时，必须注意不能直接包含字符串<code>&quot;&lt;/script&gt;&quot;</code>，因为这会导致该字符串被解释为脚本块的结束，它后面的代码将无法执行。为避免这个问题，可以使用<code>&quot;&lt;\/script&gt;&quot;</code>来替代。<br>前面的例子使用<code>document.write()</code>在页面被呈现的过程中直接向其中输出了内容。如果在文档加载结束后再调用<code>document.write()</code>，那么输出的内容将会重写整个页面，如下面的例子所示：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>document.write() Example<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>The is some content that you won't get to see because it will be overwritten<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.write(<span class="string">'Hello World'</span>)</span></span><br><span class="line">            &#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>方法<code>open()</code>和<code>close()</code>分别用于打开和关闭网页的输出流。如果是在页面加载期间使用<code>write()</code>或<code>writeln()</code>方法，则不需要用到这两个方法。</p>
<h3 id="Element类型"><a href="#Element类型" class="headerlink" title="Element类型"></a>Element类型</h3><p>除了Document类型之外，Element类型就要算是Web编程中最常用的类型了。Element类型用于表现XML或HTML元素，提供了对元素签名、子节点及特性的访问。Element节点具有以下特征：</p>
<div class="note info">
            <ul><li><strong>nodeType</strong>的值为1；</li><li><strong>nodeName</strong>的值为元素的标签名；</li><li><strong>nodeValue</strong>的值为null；</li><li><strong>parentNode</strong>可能是Document或Element；</li><li>其子节点可能是<code>Element</code>、<code>Text</code>、<code>Comment</code>、<code>ProcessingInstruction</code>、<code>CDATASection</code>或<code>EntityReference</code>。</li></ul>
          </div>
<p>要访问元素的标签名，可以使用<code>nodeName</code>属性，也可以使用<code>tagName</code>属性；这两个属性会返回相同的值。以下面的元素为例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"myDiv"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>可以像下面这样获得这个元素及其标签名：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.getElementById(<span class="string">'myDiv'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(div.tagName)                    <span class="comment">// DIV</span></span><br><span class="line"><span class="built_in">console</span>.log(div.tagName === div.nodeName)   <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>这里的元素标签名是<code>div</code>，它拥有一个值为<code>myDiv</code>的ID。可是，<code>div.tagName</code>实际上输出的是<code>&quot;DIV&quot;</code>而非<code>&quot;div&quot;</code>。<strong>在HTML中，标签名始终都是以全部大写表示；而在XML（有时候也包括XHTML）中，标签名则始终会与源代码中的保持一致。</strong>假如你不确定自己的脚本将会在HTML还是XML文档中执行，最好是在比较之前将标签名转换为相同的大小写形式，如下面的例子所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (element.tagName.toLowerCase === <span class="string">'div'</span>) &#123;</span><br><span class="line">    <span class="comment">// 在此执行某些操作</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="HTML元素的属性"><a href="#HTML元素的属性" class="headerlink" title="HTML元素的属性"></a>HTML元素的属性</h4><p>所有HTML元素都是由HTMLElement类型表示，不是直接通过这个类型，也是通过它的子类型来表示。HTMLElement类型直接继承自Element并添加了一些属性。添加的这些属性分别对应于每个HTML元素中都存在的下列标准特性。</p>
<div class="note info">
            <ul><li><strong>id</strong>：元素在文档中的唯一标识符；</li><li><strong>title</strong>：有关元素的附加说明信息，一般通过工具提示条显示出来；</li><li><strong>lang</strong>：元素内容的语言代码，很少使用；</li><li><strong>dir</strong>：语言的方向，值为<code>ltr</code>(从左到右)或<code>rtl</code>(从右到左)，也很少使用；</li><li><strong>className</strong>：与元素的class特性对应，即为元素指定的CSS类。没有将这个属性命名为class，是因为class是ECMAScript的保留字。</li></ul>
          </div>
<p>上述这些属性都可以用来取得或修改相应的特性值。以下面的HTML元素为例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"myDiv"</span> <span class="attr">class</span>=<span class="string">"bd"</span> <span class="attr">title</span>=<span class="string">"Body text"</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">dir</span>=<span class="string">"ltr"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>元素中指定的所有信息，都可以通过下列JavaScript代码取得：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.getElementById(<span class="string">'myDiv'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(div.id)         <span class="comment">// myDiv</span></span><br><span class="line"><span class="built_in">console</span>.log(div.className)  <span class="comment">// bd</span></span><br><span class="line"><span class="built_in">console</span>.log(div.title)      <span class="comment">// Body text</span></span><br><span class="line"><span class="built_in">console</span>.log(div.lang)       <span class="comment">// en</span></span><br><span class="line"><span class="built_in">console</span>.log(div.dir)        <span class="comment">// ltr</span></span><br></pre></td></tr></table></figure>
<p>像下面这样通过为每个属性赋予新的值，也可以修改对应的每个特性：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">div.id = <span class="string">"someOtherId"</span></span><br><span class="line">div.className = <span class="string">'ft'</span></span><br><span class="line">div.title = <span class="string">'Some other text'</span></span><br><span class="line">div.lang = <span class="string">'fr'</span></span><br><span class="line">div.dir = <span class="string">'rtl'</span></span><br></pre></td></tr></table></figure>

<h4 id="操作特性"><a href="#操作特性" class="headerlink" title="操作特性"></a>操作特性</h4><p>每个元素都有一或多个特性，这些特性的用途是给出相应元素或内容的附加信息。操作特性的DOM方法主要有三个：<code>getAttribute()</code>、<code>setAttribute()</code>和<code>removeAttribute()</code>。用法如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 取得特性</span></span><br><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.getElementById(<span class="string">"myDiv"</span>);</span><br><span class="line">alert(div.getAttribute(<span class="string">"id"</span>));     <span class="comment">//"myDiv"</span></span><br><span class="line">alert(div.getAttribute(<span class="string">"class"</span>));     <span class="comment">//"bd"</span></span><br><span class="line"><span class="comment">//设置特性</span></span><br><span class="line">div.setAttribute(<span class="string">"lang"</span>, <span class="string">"fr"</span>);</span><br><span class="line"><span class="comment">//移除特性</span></span><br><span class="line">div.removeAttribute(<span class="string">"class"</span>)</span><br></pre></td></tr></table></figure>

<p><strong>使用这三个方法时有一些注意事项，如下所示：</strong></p>
<div class="note info">
            <ul><li>传递给三个方法的特性名必须与实际的特性名相同，但是不区分大小写。例如，如果想要得到class特性值，应传入class而不是className，后者只有在通过对象属性访问特性时才用。</li><li>根据HTML5规范，自定义特性应该加上data-前缀以便验证。</li><li>只有公认的特性会以属性的形式添加到DOM对象中，而用户自定义特性则不会。</li><li>用户自定义特性，只能通过这三个方法来操作，无法通过对象属性形式来操作。</li><li>有两类特殊的特性，它们虽然有对应的属性名，但属性的值与通过getAttribute()方法返回的值并不相同。它们分别是：style特性和像onclick这样的事件处理程序。它们的属性值分别为对象和函数，但是通过getAttribute()方法返回的都是是字符串。</li><li>在使用setAttribute()为元素设置属性时，无论你传递的是什么类型的值，它都会将该值转换为字符串在设置到元素的属性上。所以对于一些特殊的属性，比如<code>&lt;input&gt;</code>标签上的check属性，只要出现了，无论你给它传递任何属性值（哪怕是空字符串也不行），它的属性值就是true。只有使用removeAttribute()移除check属性，才会让该属性值变为false。所以有的属性最好不要使用setAttribute()来设置。</li></ul>
          </div>
<p>下面的例子展示了公认特性与自定义特性的区别：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"myDiv"</span> <span class="attr">data-special</span>=<span class="string">"ningning"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"myInput"</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.getElementById(<span class="string">'myDiv'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(div.id)                             <span class="comment">// myDiv</span></span><br><span class="line"><span class="built_in">console</span>.log(div.getAttribute(<span class="string">'id'</span>))             <span class="comment">// myDiv</span></span><br><span class="line"><span class="built_in">console</span>.log(div[<span class="string">'data-special'</span>])                <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(div.getAttribute(<span class="string">'data-special'</span>))   <span class="comment">// ningning</span></span><br><span class="line">div.setAttribute(<span class="string">'class'</span>, <span class="string">'myClass'</span>)</span><br><span class="line">div.setAttribute(<span class="string">'data-other'</span>, <span class="string">'other'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(div.className)                      <span class="comment">// myClass</span></span><br><span class="line"><span class="built_in">console</span>.log(div[<span class="string">'data-other'</span>])                  <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(div.getAttribute(<span class="string">'data-other'</span>))     <span class="comment">// other</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> input = <span class="built_in">document</span>.getElementById(<span class="string">'myInput'</span>)</span><br><span class="line">input.setAttribute(<span class="string">'checked'</span>, <span class="string">''</span>)</span><br><span class="line"><span class="built_in">console</span>.log(input.checked)                      <span class="comment">// true</span></span><br><span class="line">input.removeAttribute(<span class="string">'checked'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(input.checked)                      <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h4 id="attributes属性"><a href="#attributes属性" class="headerlink" title="attributes属性"></a>attributes属性</h4><p><code>Element</code>类型是使用<code>attributes</code>属性的唯一一个DOM节点类型。<code>attributes</code>属性中包含一个<code>NamedNodeMap</code>类数组对象，与<code>NodeList</code>类似，也是一个“动态”的集合。元素的每一个特性都由一个<code>Attr</code>节点表示，每个节点都保存在<code>NamedNodeMap</code>对象中。<code>NamedNodeMap</code>对象拥有下列方法：</p>
<div class="note info">
            <p><code>attributes</code>属性中包含一系列<code>Attr</code>节点，每个节点的<code>nodeName</code>就是特性的名称，而节点的<code>nodeValue</code>就是特性值。</p><ul><li><strong>getNamedItem(name)</strong>：返回<code>nodeName</code>属性等于<code>name</code>的节点；</li><li><strong>removeNamedItem(name)</strong>：从列表中移除<code>nodeName</code>属性等于<code>name</code>的节点；</li><li><strong>setNamedItem(node)</strong>：向列表中添加节点，以节点的<code>nodeName</code>属性为索引；</li><li><strong>item(pos)</strong>：返回位于数字<code>pos</code>位置处的节点。</li></ul>
          </div>
<p>下面简单的演示一下getNamedItem()方法的几种使用方式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 直接使用</span></span><br><span class="line"><span class="keyword">var</span> id = element.attributes.getNamedItem(<span class="string">'id'</span>).nodeValue</span><br><span class="line"></span><br><span class="line"><span class="comment">// 后台自动调用getNamedItem()方法</span></span><br><span class="line"><span class="keyword">var</span> id = element.attributes[<span class="string">'id'</span>].nodeValue</span><br><span class="line"></span><br><span class="line"><span class="comment">// 先取得特性节点，然后修改它的nodeValue</span></span><br><span class="line">element.attributes[<span class="string">'id'</span>].nodeValue = <span class="string">'someOtherId'</span></span><br></pre></td></tr></table></figure>
<p>一般来说，由于<code>attributes</code>属性上的方法不够方便，开发人员更多的会使用<code>getAttribute()</code>、<code>setAttribute()</code>和<code>removeAttribute()</code>方法。不过当你想要遍历元素的特性时，<code>attributes</code>属性倒是可以派上用场。在需要将DOM结构序列化为XML或HTML字符串时，多数都会涉及遍历元素特性。以下代码展示了如何迭代元素的每一个特性，然后将它们构造成<code>name=&#39;value&#39;</code>这样的字符串格式。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outputAttributes</span> (<span class="params">element</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> pairs = <span class="keyword">new</span> <span class="built_in">Array</span>(),</span><br><span class="line">        attrName,</span><br><span class="line">        attrValue,</span><br><span class="line">        i,</span><br><span class="line">        len;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>, len = element.attributes.length; i &lt; len; i++) &#123;</span><br><span class="line">        attrName = element.attributes[i].nodeName</span><br><span class="line">        attrValue = element.attributes[i].nodeValue</span><br><span class="line">        pairs.push(attrName + <span class="string">'="'</span> + attrValue + <span class="string">'"'</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> pairs.join(<span class="string">' '</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div class="note info">
            <p>关于以上代码的运行结果，以下是两点必要的说明：</p><ul><li>针对attributes中包含的特性，不同浏览器返回的顺序不同。这些特性在XML或HTML代码中出现的先后顺序，不一定与它们出现在attributes中的顺序一致；</li><li>IE7及更早的版本会返回HTML元素中所有可能的特性，包括没有指定的特性。换句话说，返回100多个特性的情况会很常见。</li></ul>
          </div>
<p>针对IE7及更早版本中存在的问题，可以对上面的函数加以改进，让它只返回指定的特性。每个特性节点都有一个名为<code>specified</code>的属性，这个属性的值如果为true，则意味着要么是在HTML中指定了相应特性，要么是通过<code>setAttribute()</code>方法设置了该特性。在IE中，所有未设置过的特性的该属性值都为false，而在其他浏览器中根本不会为这类特性生成对应的特性节点（因此，在这些浏览器中，任何特性节点的specified值始终为true）。改进后的代码如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outputAttributes</span> (<span class="params">element</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> pairs = <span class="keyword">new</span> <span class="built_in">Array</span>(),</span><br><span class="line">        attrName,</span><br><span class="line">        attrValue,</span><br><span class="line">        i,</span><br><span class="line">        len;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>, len = element.attributes.length; i &lt; len; i++) &#123;</span><br><span class="line">        attrName = element.attributes[i].nodeName</span><br><span class="line">        attrValue = element.attributes[i].nodeValue</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (element.attributes[i].specified) &#123;</span><br><span class="line">            pairs.push(attrName + <span class="string">'="'</span> + attrValue + <span class="string">'"'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> pairs.join(<span class="string">' '</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="创建元素"><a href="#创建元素" class="headerlink" title="创建元素"></a>创建元素</h4><p>使用<code>document.createElement()</code>方法可以创建新元素。这个方法只接受一个参数，即要创建元素的标签名。<strong>这个标签名在HTML文档中不区分大小写，而在XML（包括XHTML）文档中，则是区分大小写的。</strong>在使用该方法创建新元素的同时，也为新元素设置了<code>ownerDocument</code>属性。例如，使用以下代码可以创建一个<code>&lt;div&gt;</code>元素：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>)</span><br></pre></td></tr></table></figure>
<p>在IE中，可以以另一种方式使用<code>document.createElement()</code>，即为这个方法传入完整的元素标签，也可以包含属性，如下面的例子所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">'&lt;div id="myNewDiv" class="box"&gt;&lt;/div&gt;'</span>)</span><br></pre></td></tr></table></figure>
<p>这种方式有助于避开在IE7及更早版本中动态创建元素的某些问题。<strong>建议只在需要避开IE7及更早版本中存在的问题时，才使用这种方式！</strong></p>
<h4 id="查找元素的子节点"><a href="#查找元素的子节点" class="headerlink" title="查找元素的子节点"></a>查找元素的子节点</h4><div class="note info">
            <ul><li><strong>getElementById()</strong>: 根据id获取一个元素节点对象</li><li><strong>getElementsByTagName()</strong>: 通过标签名获取一组元素节点对象</li><li><strong>getElementsByName()</strong>: 通过<code>name</code>属性获取一组元素节点对象</li><li><strong>querySelector()</strong>: 返回文档中匹配指定 CSS 选择器的第一个元素节点对象</li><li><strong>querySelectorAll()</strong>: 返回文档中匹配指定 CSS 选择器的所有元素节点对象，返回 NodeList 对象。</li></ul>
          </div>

<h3 id="Text类型"><a href="#Text类型" class="headerlink" title="Text类型"></a>Text类型</h3><p>文本节点由Text类型表示，包含的是可以照字面量解释的纯文本内容。纯文本中可以包含转义后的HTML字符，但不能包含HTML代码。Text节点具有以下特性：</p>
<div class="note info">
            <ul><li><code>nodeType</code>的值为3；</li><li><code>nodeName</code>的值为<code>#text</code>；</li><li><code>nodeValue</code>的值为节点所包含的文本；</li><li><code>parentNode</code>是一个Element；</li><li>不支持（没有）子节点。</li></ul>
          </div>
<p>可以通过<code>nodeValue</code>属性或<code>data</code>属性访问<code>Text</code>节点中包含的文本，这两个属性中包含的值相同。对<code>nodeValue</code>的修改也会通过<code>data</code>反映出来，反之亦然。</p>
<div class="note info">
            <p>使用下列方法可以操作节点中的文本：</p><ul><li><strong>appendData(text)</strong>：将text添加到节点的末尾；</li><li><strong>deleteData(offset, count)</strong>：从offset指定的位置开始删除count个字符；</li><li><strong>insertData(offset, text)</strong>：在offset指定的位置插入text；</li><li><strong>replaceData(offset, count, text)</strong>：用text替换从offset指定的位置开始到offset + count为止处的文本；</li><li><strong>splitText(offset)</strong>：从offset指定的位置将当前文本节点分成两个文本节点；</li><li><strong>substringData(offset, count)</strong>：提取从offset指定的位置开始到offset + count为止处的字符串。</li><li>除了这些方法之外，文本节点还有一个<code>length</code>属性，保存着节点中字符的数目。而且，<code>nodeValue.length</code>和<code>data.length</code>中也保存着同样的值。</li></ul>
          </div>
<h4 id="创建文本节点"><a href="#创建文本节点" class="headerlink" title="创建文本节点"></a>创建文本节点</h4><p>可以使用<code>document.createTextNode()</code>方法创建新文本节点，这个方法接受一个参数：要插入节点中的文本。</p>
<p>一般情况下，每个元素只有一个文本子节点。不过，在某些情况下也可能包含多个文本子节点，这种情况下，相邻的文本子节点会连起来显示，中间不会有空格</p>
<h4 id="规范化文本节点"><a href="#规范化文本节点" class="headerlink" title="规范化文本节点"></a>规范化文本节点</h4><p>DOM文档中存在相邻的同胞文本节点很容易导致混乱，因为分不清哪个文本节点表示哪个字符串。另外，DOM文档中出现相邻文本节点的情况也不在少数，于是就催生了一个能够将相邻文本节点合并的方法。这个方法是由Node类型定义的（因而在所有节点类型中都存在），名叫<code>normalize()</code>。<strong><code>normalize()</code>方法移除空的文本节点，并连接相邻的文本节点。</strong>语法如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node.normalize()</span><br></pre></td></tr></table></figure>
<h4 id="分割文本节点"><a href="#分割文本节点" class="headerlink" title="分割文本节点"></a>分割文本节点</h4><p>Text类型提供了一个作用与<code>normalize()</code>相反的方法：<code>splitText()</code>。这个方法会将一个文本节点分成两个文本节点，即按照指定的位置分割<code>nodeValue</code>值。原来的文本节点将包含从开始到指定位置之前的内容，新文本节点将包含剩下的文本。这个方法会返回一个新文本节点，该节点与原节点的<code>parentNode</code>相同。示例如下:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> element = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span><br><span class="line">element.className = <span class="string">"message"</span>; </span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> textNode = <span class="built_in">document</span>.createTextNode(<span class="string">"Hello world!"</span>); </span><br><span class="line">element.appendChild(textNode); </span><br><span class="line"> </span><br><span class="line"><span class="built_in">document</span>.body.appendChild(element); </span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> newNode = element.firstChild.splitText(<span class="number">5</span>);</span><br><span class="line">alert(element.firstChild.nodeValue);    <span class="comment">//"Hello"</span></span><br><span class="line">alert(newNode.nodeValue);               <span class="comment">//" world!"</span></span><br><span class="line">alert(element.childNodes.length);       <span class="comment">//2</span></span><br></pre></td></tr></table></figure>

<h4 id="Comment类型"><a href="#Comment类型" class="headerlink" title="Comment类型"></a>Comment类型</h4><p>注释在DOM中是通过Comment类型来表示的。Comment节点具有下列特征：</p>
<div class="note info">
            <ul><li><code>nodeType</code>的值为8；</li><li><code>nodeName</code>的值为#comment；</li><li><code>nodeValue</code>的值是注释的内容；</li><li><code>parentNode</code>可能是Document或Element；</li><li>不支持（没有）子节点。</li></ul>
          </div>
<p>Comment类型与Text类型继承自相同的基类，因此它拥有除<code>splitText()</code>之外的所有字符串操作方法。与Text类型相似，也可以通过<code>nodeValue</code>或<code>data</code>属性来取得注释的内容。</p>
<p>使用<code>document.createComment()</code>并为其传递注释文本也可以创建注释节点。</p>
<h4 id="CDATASection类型"><a href="#CDATASection类型" class="headerlink" title="CDATASection类型"></a>CDATASection类型</h4><p>CDATASection类型只针对基于XML的文档，表示的是CDATA区域。与Comment类似，CDATASection类型继承自Text类型，因此拥有除<code>splitText()</code>之外的所有字符串操作方法。CDATASection节点具有下列特征：</p>
<div class="note info">
            <ul><li><code>nodeType</code>的值为4；</li><li><code>nodeName</code>的值为#cdata-section；</li><li><code>nodeValue</code>的值是CDATA区域的内容；</li><li><code>parentNode</code>可能是Document或Element；</li><li>不支持（没有）子节点。</li></ul>
          </div>
<p>在真正的XML文档中，可以使用<code>document.createCDataSection()</code>来创建CDATA区域，只需为其传入节点的内容即可。</p>
<h3 id="DocumentType类型"><a href="#DocumentType类型" class="headerlink" title="DocumentType类型"></a>DocumentType类型</h3><p>DocumentType类型在Web浏览器中并不常用，仅有Firefox、Safari和Opera支持它。DocumentType包含着与文档的<code>doctype</code>有关的所有信息，它具有下列特征：</p>
<div class="note info">
            <ul><li><code>nodeType</code>的值为<code>10</code>；</li><li><code>nodeName</code>的值为<code>doctype</code>的名称；</li><li><code>nodeValue</code>的值为<code>null</code>；</li><li><code>parentNode</code>是<code>Document</code>；</li><li>不支持（没有）子节点。</li></ul>
          </div>
<p>DOM1级中，DocumentType对象不能动态创建，而只能通过解析文档代码的方式来创建。支持它的浏览器会把DocumentType对象保存在<code>document.type</code>中。</p>
<div class="note info">
            <p>DOM1级描述了DocumentType对象的3个属性：</p><ul><li><strong>name</strong>：表示文档类型的名称；</li><li><strong>entities</strong>：由文档类型描述的实体的<code>NamedNodeMap</code>对象；</li><li><strong>notations</strong>：由文档类型描述的符号的<code>NamedNodeMap</code>对象。</li></ul>
          </div>
<p>通常，浏览器中的文档使用的都是HTML或XHTML文档类型，因而<code>entities</code>和<code>notations</code>都是空列表（列表中的项来自行内文档类型声明）。但不管怎样，只有<code>name</code>属性是有用的。这个属性中保存的是文档类型的名称，也就是出现在<code>&lt;!DOCTYPE</code>和<code>&gt;</code>之间的文本。</p>
<h3 id="DocumentFragment类型"><a href="#DocumentFragment类型" class="headerlink" title="DocumentFragment类型"></a>DocumentFragment类型</h3><p>在所有节点类型中，只有DocumentFragment在文档中没有对应的标记。DOM规定文档片段（document fragment）是一种“轻量级”的文档，可以包含和控制节点，但不会像完整的文档那样占用额外的资源。DocumentFragment节点具有下列特征：</p>
<div class="note info">
            <ul><li><code>nodeType</code>的值为<code>11</code>；</li><li><code>nodeName</code>的值为<code>#document-fragment</code>；</li><li><code>nodeValue</code>的值为<code>null</code>；</li><li><code>parentNode</code>是值为<code>null</code>；</li><li>其子节点可能是Element、Text、Comment、ProcessingInstruction、CDATASection或EntityReference。</li></ul>
          </div>
<p>虽然不能把文档片段直接添加到文档中，但可以将它作为一个“仓库”来使用，即可以在里面保存将来可能会添加到文档中的节点。要创建文档片段，可以使用<code>document.createDocumentFragment()</code>方法，如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fragment = <span class="built_in">document</span>.createDocumentFragment()</span><br></pre></td></tr></table></figure>
<p>文档片段继承了Node的所有方法，通常用于执行那些针对文档的DOM操作。如果将文档中的节点添加到文档片段中，就会从文档树中移除该节点，也不会从浏览器中再看到该节点。添加到文档片段中的新节点同样也不属于文档树。可以通过<code>appendChild()</code>或<code>insertBefore()</code>将文档片段中的内容添加到文档中。在将文档片段作为参数传递给这两个方法时，实际上只会将文档片段的所有字节点添加到相应位置上，文档片段本身永远不会称为文档树的一部分。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"myList"</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    var fragment = document.createDocumentFragment();</span><br><span class="line">    var ul = document.getElementById('myList');</span><br><span class="line">    var li = null;</span><br><span class="line"></span><br><span class="line">    for (let i = 0; i &lt; 3; i++) &#123;</span><br><span class="line">        li = document.createElement('li');</span><br><span class="line">        li.appendChild(document.createTextNode('Item' + (i+1)));</span><br><span class="line"><span class="css">        <span class="selector-tag">fragment</span><span class="selector-class">.appendChild</span>(<span class="selector-tag">li</span>);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-tag">ul</span><span class="selector-class">.appendChild</span>(<span class="selector-tag">fragment</span>);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Attr类型"><a href="#Attr类型" class="headerlink" title="Attr类型"></a>Attr类型</h3><p>元素的特性在DOM中以Attr类型来表示。在所有浏览器中，都可以访问Attr类型的构造函数和原型。从技术角度讲，特性就是存在于元素的<code>attributes</code>属性中的节点。特性节点具有下列特征：</p>
<div class="note info">
            <ul><li><code>nodeType</code>的值为<code>2</code>；</li><li><code>nodeName</code>的值为特性的名称；</li><li><code>nodeValue</code>的值为特性的值；</li><li><code>parentNode</code>是值为null；</li><li>在HTML中不支持（没有）子节点；</li><li>在XML中子节点可以是Text或EntityReference。</li></ul>
          </div>
<p>尽管它们也是节点，但特性却不被认为是DOM文档树的一部分。开发人员最常使用的是<code>getAttribute()</code>、<code>setAttribute()</code>和<code>removeAttribute()</code>方法，很少直接引用特性节点.</p>
<div class="note info">
            <p>Attr对象有3个属性：</p><ul><li><code>name</code>：特性的名称，与<code>nodeName</code>的值相同；</li><li><code>value</code>：特性的值，与<code>nodeValue</code>的值相同；</li><li><code>specified</code>：是一个布尔值，用以区别特性是在代码中指定的，还是默认的。</li></ul>
          </div>
<p>使用<code>document.createAttribute()</code>并传入特性的名称可以创建新的特性节点。例如，要为元素添加<code>align</code>特性，可以使用下列代码:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> attr = <span class="built_in">document</span>.createAttribute(<span class="string">'align'</span>)</span><br><span class="line">attr.value = <span class="string">'left'</span></span><br><span class="line"></span><br><span class="line">element.attributes.setNamedItem(attr)</span><br></pre></td></tr></table></figure>
<h2 id="DOM操作技术"><a href="#DOM操作技术" class="headerlink" title="DOM操作技术"></a>DOM操作技术</h2><h3 id="动态脚本"><a href="#动态脚本" class="headerlink" title="动态脚本"></a>动态脚本</h3><p>创建动态脚本有两种方式：插入外部文件和直接插入JavaScript代码。</p>
<h4 id="插入外部文件"><a href="#插入外部文件" class="headerlink" title="插入外部文件"></a>插入外部文件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadScript</span> (<span class="params">url</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>)</span><br><span class="line"></span><br><span class="line">    script.type = <span class="string">'text/javascript'</span></span><br><span class="line">    script.src = url</span><br><span class="line"></span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(script)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">loadScript(<span class="string">'clent.js'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="插入JavaScript代码"><a href="#插入JavaScript代码" class="headerlink" title="插入JavaScript代码"></a>插入JavaScript代码</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadScriptString</span> (<span class="params">code</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>)</span><br><span class="line"></span><br><span class="line">    script.type = <span class="string">'text/javascript'</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        script.appendChild(<span class="built_in">document</span>.createTextNode(code))</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        script.text = code</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(script)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">loadScriptString(<span class="string">'function sayHi () &#123;console.log("hi")&#125;'</span>)</span><br></pre></td></tr></table></figure>
<p>以这种方式加载的代码会在全局作用域中执行，而且当脚本执行后将立即可用。实际上，这样执行代码与在全局作用域中把相同的字符串传递给<code>eval()</code>是一样的。</p>
<h3 id="动态样式"><a href="#动态样式" class="headerlink" title="动态样式"></a>动态样式</h3><p>能够把CSS样式包含到HTML页面中的元素有两个。其中，<code>&lt;link&gt;</code>元素用于包含来自外部的文件，而<code>&lt;style&gt;</code>元素用于指定嵌入的样式。与动态脚本类似，所谓动态样式是指在页面刚加载时不存在的样式；动态样式是在页面加载完成后动态添加到页面中的。</p>
<p>创建动态样式也有两种方式：通过<code>&lt;link&gt;</code>和通过<code>&lt;style&gt;</code>。</p>
<h4 id="通过link"><a href="#通过link" class="headerlink" title="通过link"></a>通过link</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadStyle</span> (<span class="params">url</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> link = <span class="built_in">document</span>.createElement(<span class="string">'link'</span>)</span><br><span class="line"></span><br><span class="line">    link.rel = <span class="string">'stylesheet'</span></span><br><span class="line">    link.type = <span class="string">'text/css'</span></span><br><span class="line">    link.href = url</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> head = <span class="built_in">document</span>.getElementByTagName(<span class="string">'head'</span>)[<span class="number">0</span>]</span><br><span class="line">    head.appendChild(link)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">loadStyle(<span class="string">'style.css'</span>)</span><br></pre></td></tr></table></figure>

<div class="note info">
            <p>注意事项：</p><ul><li>必须将<code>&lt;link&gt;</code>元素添加到<code>&lt;head&gt;</code>而不是<code>&lt;body&gt;</code>元素，才能保证在所有浏览器中的行为一致；</li><li>加载外部样式文件的过程是异步的。</li></ul>
          </div>

<h4 id="通过style"><a href="#通过style" class="headerlink" title="通过style"></a>通过style</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadStyleString</span> (<span class="params">css</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> style = <span class="built_in">document</span>.createElement(<span class="string">'style'</span>)</span><br><span class="line"></span><br><span class="line">    style.type = <span class="string">'text/css'</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        style.appendChild(<span class="built_in">document</span>.createTextNode(css))</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        style.styleSheet.cssText = css</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> head = <span class="built_in">document</span>.getElementByTagName(<span class="string">'head'</span>)[<span class="number">0</span>]</span><br><span class="line">    head.appendChild(link)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">loadStyleString(<span class="string">'body &#123;background-color: red&#125;'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="操作表格"><a href="#操作表格" class="headerlink" title="操作表格"></a>操作表格</h3><p>为了方便构建表格，HTML DOM为<code>&lt;table&gt;</code>、<code>&lt;tbody&gt;</code>和<code>&lt;tr&gt;</code>元素添加了一些属性和方法：</p>
<div class="note info">
            <p>为<code>&lt;table&gt;</code>元素添加的属性和方法：</p><ul><li><code>caption</code>：保存着对<code>&lt;caption&gt;</code>元素（如果有）的引用；</li><li><code>tHead</code>：保存着对<code>&lt;thead&gt;</code>元素（如果有）的引用；</li><li><code>tBodies</code>：是一个<code>&lt;tbody</code>&gt;元素的HTMLCollection；</li><li><code>tFoot</code>：保存着对<code>&lt;tfoot&gt;</code>元素（如果有）的引用；</li><li><code>rows</code>：是一个表格中所有行的<code>HTMLCollection</code>；</li><li><code>createCaption()</code>：创建<code>&lt;caption&gt;</code>元素，将其放到表格中，返回引用；</li><li><code>createTHead()</code>：创建<code>&lt;thead&gt;</code>元素，将其放到表格中，返回引用；</li><li><code>createTFoot()</code>：创建<code>&lt;tfoot&gt;</code>元素，将其放到表格中，返回引用；</li><li><code>deleteCaption()</code>：删除<code>&lt;caption&gt;</code>元素；</li><li><code>deleteTHead()</code>：删除<code>&lt;thead&gt;</code>元素；</li><li><code>deleteTFoot()</code>：删除<code>&lt;tfoot&gt;</code>元素；</li><li><code>deleteRow(pos)</code>：删除指定位置的行；</li><li><code>insertRow(pos)</code>：向rows集合中的指定位置插入一行。</li></ul><hr><p>为<code>&lt;tbody&gt;</code>元素添加的属性和方法：</p><ul><li><strong>rows</strong>：保存着<code>&lt;tbody&gt;</code>元素中行的<code>HTMLCollection</code>；</li><li><strong>deleteRow(pos)</strong>：删除指定位置的行；</li><li><strong>insertRow(pos)</strong>：向rows集合中的指定位置插入一行，返回对新插入行的引用。</li></ul><hr><p>为<code>&lt;tr&gt;</code>元素添加的属性和方法：</p><ul><li><strong>cells</strong>：保存着<code>&lt;tr&gt;</code>元素中单元格的<code>HTMLCollection</code>；</li><li><strong>deleteCell(pos)</strong>：删除指定位置的单元格；</li><li><strong>insertCell(pos)</strong>：向<code>cells</code>集合中的指定位置插入一个单元格，返回对新插入单元格的引用。</li></ul>
          </div>
<p><strong>想创建下面的HTML表格：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1"</span> <span class="attr">width</span>=<span class="string">"100%"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>row 1, col 1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>row 1, col 2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>row 2, col 1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>row 2, col 2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>创建的代码：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> table = <span class="built_in">document</span>.createElement(<span class="string">'table'</span>)</span><br><span class="line">table.border = <span class="number">1</span></span><br><span class="line">table.width = <span class="string">'100%'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> tbody = <span class="built_in">document</span>.createElement(<span class="string">'tbody'</span>)</span><br><span class="line">table.appendChild(tbody)</span><br><span class="line"></span><br><span class="line">tbody.insertRow(<span class="number">0</span>)</span><br><span class="line">tbody.rows[<span class="number">0</span>].insertCell(<span class="number">0</span>)</span><br><span class="line">tbody.rows[<span class="number">0</span>].cells[<span class="number">0</span>].appendChild(<span class="built_in">document</span>.createTextNode(<span class="string">'row 1, col 1'</span>))</span><br><span class="line">tbody.rows[<span class="number">0</span>].insertCell(<span class="number">1</span>)</span><br><span class="line">tbody.rows[<span class="number">0</span>].cells[<span class="number">1</span>].appendChild(<span class="built_in">document</span>.createTextNode(<span class="string">'row 1, col 2'</span>))</span><br><span class="line"></span><br><span class="line">tbody.insertRow(<span class="number">1</span>)</span><br><span class="line">tbody.rows[<span class="number">1</span>].insertCell(<span class="number">0</span>)</span><br><span class="line">tbody.rows[<span class="number">1</span>].cells[<span class="number">0</span>].appendChild(<span class="built_in">document</span>.createTextNode(<span class="string">'row 2, col 1'</span>))</span><br><span class="line">tbody.rows[<span class="number">1</span>].insertCell(<span class="number">1</span>)</span><br><span class="line">tbody.rows[<span class="number">1</span>].cells[<span class="number">1</span>].appendChild(<span class="built_in">document</span>.createTextNode(<span class="string">'row 2, col 2'</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.body.appendChild(table)</span><br></pre></td></tr></table></figure>

<h3 id="使用Nodelist"><a href="#使用Nodelist" class="headerlink" title="使用Nodelist"></a>使用Nodelist</h3><p>理解<code>Nodelist</code>及其“近亲”<code>NamedNodeMap</code>和<code>HTMLCollection</code>，是从整体上透彻理解DOM的关键所在。这三个集合都是“动态的”；换句话说，每当文档结构发生变化时，它们都会得到更新。因此，它们始终都会保存着最新、最准确的信息。从本质上说，所有<code>Nodelist</code>对象都是在访问DOM文档时实时运行的查询。</p>
<p>例如，下列代码会导致无限循环：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> divs = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'div'</span>),</span><br><span class="line">    i,</span><br><span class="line">    div;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; divs.length; i++) &#123;</span><br><span class="line">    div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>)</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(div)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第一行代码会取得文档中所有<code>&lt;div</code>元素的<code>HTMLCollection</code>。由于这个集合是“动态的”，因此只要有新<code>&lt;div&gt;</code>元素被添加到页面中，这个元素也会被添加到该集合中。浏览器不会将所有集合都保存在一个列表中，而是在下一次访问时再更新集合。结果，在遇到上例中所示的循环代码时，就会导致一个有趣的问题。每次循环都要对条件<code>i&lt;divs.length</code>求值，意味着会运行取得所有<code>&lt;div&gt;</code>元素的查询。考虑到循环体每次都会创建一个新<code>&lt;div&gt;</code>元素并将其添加到文档中，因此<code>divs.length</code>的值在每次循环后都会递增。既然<code>i</code>与<code>divs.length</code>每次都会同时递增，结果他们的值永远不会相等。<br>如果想要迭代一个<code>NodeList</code>，最好是使用<code>length</code>属性初始化第二个变量，然后将迭代器与该变量进行比较，如下面的例子所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> divs = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'div'</span>),</span><br><span class="line">    i,</span><br><span class="line">    div;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; len = divs.length;i &lt; len; i++) &#123;</span><br><span class="line">    div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>)</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(div)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个例子中初始化了第二个变量<code>len</code>。由于<code>len</code>中保存着对<code>divs.length</code>在循环开始时的一个快照。因此就会避免上一个例子中出现的无限循环问题。</p>
<p>一般来说，应该尽量减少访问<code>NodeList</code>的次数，因为每次访问<code>NodeList</code>，都会运行一次基于文档的查询。所以应该考虑将<code>NodeList</code>中取得的值缓存起来。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/blog/page/3/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/blog/">1</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/blog/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/9/">9</a><a class="extend next" rel="next" href="/blog/page/5/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Ning Ning</p>
  <div class="site-description" itemprop="description">光、温暖、温柔</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blog/archives/">
        
          <span class="site-state-item-count">82</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/blog/categories/">
          
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/blog/tags/">
          
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ning Ning</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/blog/lib/anime.min.js"></script>
  <script src="/blog/lib/velocity/velocity.min.js"></script>
  <script src="/blog/lib/velocity/velocity.ui.min.js"></script>

<script src="/blog/js/utils.js"></script>

<script src="/blog/js/motion.js"></script>


<script src="/blog/js/schemes/pisces.js"></script>


<script src="/blog/js/next-boot.js"></script>




  




  
<script src="/blog/js/local-search.js"></script>













  

  

</body>
</html>
